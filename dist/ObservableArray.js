!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.OArray=e()}(this,function(){"use strict";var t=function(t){return"number"==typeof t},e=function(t){var e=parseInt(t);return!isNaN(e)&&(("number"==typeof t||"string"==typeof t)&&e==t)},n=function(t){return"string"==typeof t},o=function(t){return"function"==typeof t},i=function(t){return"[object Object]"===Object.prototype.toString.call(t)},r=function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=function(t){return null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"function"==typeof t},a=function(t){return t instanceof Node},f=function(t){return t instanceof NamedNodeMap},c=function(t,e,n){if(i(t)){for(var o in t)if(t.hasOwnProperty(o)&&!1===(l=e(t[o],o)))break}else if(r(t))if(n)for(s=t.length-1;s>=0&&!1!==(l=e(t[s],s));s--);else for(var s=0,p=t.length;s<p&&!1!==(l=e(t[s],s));s++);else if(a(t)){var h=!1;switch(t.nodeType){case Node.ELEMENT_NODE:break;case Node.TEXT_NODE:case Node.COMMENT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_TYPE_NODE:case Node.DOCUMENT_FRAGMENT_NODE:default:h=!0}if(h)return;for(var s=0,u=t.childNodes,p=t.childNodes.length;s<p;s++)e(u[s]),c(u[s],e)}else if(f(t))for(var s=0,p=t.length;s<p;s++){var l=e(t[s].nodeValue,t[s].nodeName);if(!1===l)break}else Util.isFunction(t.forEach)&&t.forEach(e)},p=function(t){var e=t;return i(t)?(e={},c(t,function(t,n){e[n]=p(t)})):r(t)&&(e=[],c(t,function(t){e.push(p(t))})),e},h=function(t,n){if(i(t))return t.hasOwnProperty(n);if(r(t)){var o=parseInt(n);return e(n)&&t.length>o&&o>=0}return!1},u=function(e,o,s){var a=n(o)||t(o),f=a?e[o]:e;(i(f)||r(f))&&(c(f,function(t,e){u(f,e)}),r(f)&&l(f)),a&&(e[o]=s)},l=function(e,n){if(t(n))for(c(e,function(t,o){if(!(o>=n))return!1;e.length--},!0);e.length<n;)e.push(null);else c(e,function(t,n){void 0===t&&e.length--},!0);return e},d=function(t,e,n){function o(t,e,n){i(e)&&(c(e,function(e,i){!h(t,i)||s(e)?t[i]!==e&&(t[i]=p(e)):o(t[i],e,n)}),n&&(c(t,function(n,o){h(e,o)||u(t,o)}),r(t)&&l(t)))}if(!i(t))return null;var a=Array.prototype.slice.call(arguments,1,!0===arguments[arguments.length-1]?arguments.length-1:arguments.length);return c(a,function(e){o(t,e,n)}),t},y=["set","push","pop","unshift","shift","splice"],E=function(t,e){r(t)||(t=[]);var n=this;Object.defineProperty(this,"__data",{value:t}),y.forEach(function(t){Object.defineProperty(n,"on"+t,{value:[]})}),Object.defineProperty(this,"length",{get:function(){return t.length},set:function(e){t.length=e}}),c(t,function(t,e){n.assignElement(e,t)})};return E.prototype=[],E.prototype.constructor=E,E.prototype.addEventListener=function(t,e){this["on"+t]&&o(e)&&this["on"+t].push(e)},E.prototype.removeEventListener=function(t,e){if(this["on"+t]&&o(e)){var n=this["on"+t];c(n,function(t,o){if(t===e)return n.splice(o,1),!1})}},E.prototype.dispatchEvent=function(t,e){var n=this,o=Array.prototype.slice.call(arguments,1);c(this["on"+t],function(t){t.apply(n,o)})},E.prototype.assignElement=function(t){Object.defineProperty(this,t,{get:function(){return this.__data[t]},set:function(e){var n=this.__data[t];s(n)||s(e)?(this.dispatchEvent("set",n,e,t,this.__data),n=e,this.__data[t]=n):d(n,e,!0)},configurable:!0,enumerable:!0})},E.prototype.deleteElement=function(){this.hasOwnProperty(this.length-1)&&delete this[this.length-1]},E.prototype.push=function(t){this.__data.push(t),this.assignElement(this.length-1),this.dispatchEvent("push",t)},E.prototype.pop=function(t){this.deleteElement(),this.__data.pop(),this.dispatchEvent("pop")},E.prototype.unshift=function(t){this.__data.unshift(t),this.assignElement(this.length-1),this.dispatchEvent("unshift",t)},E.prototype.shift=function(t){this.deleteElement(),this.__data.shift(),this.dispatchEvent("shift")},E.prototype.toArray=function(t){return t?this.__data:p(this.__data)},E.prototype.splice=function(e,n,o){(!t(e)||e<0)&&(e=0),e>=this.length&&(e=this.length),(!t(n)||n<0)&&(n=0),n+e>this.length&&(n=this.length-e);for(var i=[],r=e;r<e+n;r++)i.push(p(this[r]));for(var s=Array.prototype.slice.call(arguments,2),a=s.length,f=Math.min(n,a),r=e;r<e+f;r++)this[r]=s[r-e];if(n!==a){var c;n>a?(c=[e+a,n-a],Array.prototype.splice.apply(this.__data,c)):(c=[e+n,0].concat(s.slice(n)),Array.prototype.splice.apply(this.__data,c)),this.dispatchEvent.apply(this,["splice"].concat(c))}},E.prototype.forEach=function(t){for(var e=0;e<this.length&&!1!==t(this[e],e);e++);},["reverse","sort"].forEach(function(t){E.prototype[t]=function(){var e=p(this.__data);Array.prototype[t].apply(e,arguments);for(var n=0;n<this.length;n++)this[n]=e[n]}}),["slice","concat","filter","map","reduce","indexOf","find","findIndex","fill","join"].forEach(function(t){E.prototype[t]=function(){return Array.prototype[t].apply(this.toArray(),arguments)}}),E});
//# sourceMappingURL=ObservableArray.js.map
