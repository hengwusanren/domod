!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Kernel={})}(this,function(e){"use strict";function t(e,t){if(void 0===t&&(t=E),!s(t)||!l(e))return null;for(var r=t,n=e.split(".");n.length>=1;){if(1===n.length)return{target:r,property:n[0]};if(r=r[n.shift()],!s(r))return null}return null}function r(e,r){var n=t(e,r);return n?n.target[n.property]:null}function n(e){if(!s(e))return null;if(!e.__kernel_root){var t="kr_"+a();Object.defineProperty(e,"__kernel_root",{value:t}),E[t]=e}return e.__kernel_root}function o(e,t){return(s(e)||l(e))&&(e=[e]),d(e)?e.map(function(e){return s(e)?n(e.root)+"."+e.alias:l(e)?n(t)+"."+e:null}):[]}function u(e,u,i){var f=t(u,e);if(null!=f){u=n(e)+"."+u,Object.defineProperty(this,"__alias",{value:u});var a=o(i.dnstream),c=i.resultIn,l=o(i.upstream),s=i.resultFrom;a.forEach(function(e){g[e]||(g[e]={}),g[e][u]=!0,O[u]||(O[u]={}),O[u][e]=!0}),p(c)&&(h[u]=c),l.forEach(function(e){g[u]||(g[u]={}),g[u][e]=!0,O[e]||(O[e]={}),O[e][u]=!0}),p(s)&&(b[u]=s);var d=f.target[f.property];_(f.target,f.property)&&delete f.target[f.property],Object.defineProperty(f.target,f.property,{get:function(){return b[u]?b[u].apply(E,l.map(function(e){return r(e)})):d},set:function(t){t!==d&&(d=t,h[u]&&h[u].apply(e,[t]),Object.keys(O[u]).forEach(function(e){b[e]&&r(e)}))},enumerable:!0})}}function i(e){if(!s(e))return!1;var t=!0,r={dnstream:!0,resultIn:!0,upstream:!0,resultFrom:!0};return v(e,function(e,n){if(!r[n])return t=!1,!1}),t}function f(e,t){var r={};return v(e,function(e,n){if(s(e)&&!i(e)){var o=f(e,t);v(o,function(e,t){r[n+"."+t]=e})}else t&&!i(e)||(r[n]=e)}),r}var a=function(){var e=0;return function(){return e++}}(),c=function(e){var t=parseInt(e);return!isNaN(t)&&(("number"==typeof e||"string"==typeof e)&&t==e)},l=function(e){return"string"==typeof e},p=function(e){return"function"==typeof e},s=function(e){return"[object Object]"===Object.prototype.toString.call(e)},d=function(e){return"[object Array]"===Object.prototype.toString.call(e)},N=function(e){return e instanceof Node},y=function(e){return e instanceof NamedNodeMap},v=function(e,t,r){if(s(e)){for(var n in e)if(e.hasOwnProperty(n)&&!1===(a=t(e[n],n)))break}else if(d(e))if(r)for(o=e.length-1;o>=0&&!1!==(a=t(e[o],o));o--);else for(var o=0,u=e.length;o<u&&!1!==(a=t(e[o],o));o++);else if(N(e)){var i=!1;switch(e.nodeType){case Node.ELEMENT_NODE:break;case Node.TEXT_NODE:case Node.COMMENT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_TYPE_NODE:case Node.DOCUMENT_FRAGMENT_NODE:default:i=!0}if(i)return;for(var o=0,f=e.childNodes,u=e.childNodes.length;o<u;o++)t(f[o]),v(f[o],t)}else if(y(e))for(var o=0,u=e.length;o<u;o++){var a=t(e[o].nodeValue,e[o].nodeName);if(!1===a)break}else Util.isFunction(e.forEach)&&e.forEach(t)},_=function(e,t){if(s(e))return e.hasOwnProperty(t);if(d(e)){var r=parseInt(t);return c(t)&&e.length>r&&r>=0}return!1},E={},O={},h={},g={},b={};u.prototype.disable=function(){},u.prototype.enable=function(){},u.prototype.destroy=function(){},e.Kernel=u,e.Relate=function(e,t){var r;if(1===arguments.length){if(!s(e))return null;r=f(e,!0)}else{if(!s(t))return null;r=f(t,!0)}v(r,function(t,r){new u(e,r,t)})},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=Kernel.js.map
