!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.domod=n()}(this,function(){"use strict";function t(t,n,e,r){t.addEventListener?t.addEventListener(n,e,!!r):("input"===n&&(n="propertychange"),t.attachEvent("on"+n,e))}function n(t,e,r){e=e||function(){return!0};var i={};return P(t,function(t,o){if(T(t)&&!e(t)){var a=n(t,e,r);P(a,function(t,n){i[o+"."+n]=t})}else!e(t)&&r||(i[o]=t)}),i}function e(t,n,e,i){Q&&!j(t)?Object.defineProperty(t,n,e):("value"in e&&(t[n]=e.value),i=i||r(n,t),!J[i]&&("get"in e||"set"in e)&&(J[i]={}),"get"in e&&(J[i].get=e.get),"set"in e&&(J[i].set=e.set))}function r(t,n){if(n===undefined)return t;var e=i(n);return null==e?t||"":e+(t?"."+t:"")}function i(t){if(t===U||!T(t)&&!j(t))return null;if(!t.__kernel_root){var n="kr_"+N();e(t,"__kernel_root",{value:n}),U[n]=t}return t.__kernel_root}function o(t,n){return(T(t)||Z(t))&&(t=[t]),k(t)?t.map(function(t){return T(t)?i(t.root)+"."+t.alias:Z(t)?i(n)+"."+t:null}):[]}function a(t){return Y[t]===undefined?0:Y[t].length}function u(t,n,r){var u,f={};if(Q){if(null==(f=c(n,t)))return;u=f.target[f.property]}var s=i(t)+"."+n,p=s+"#"+a(s);e(this,"__kid",{value:p}),q[this.__kid]=1,Y[s]===undefined&&(Y[s]=[],Q&&F(f.target,f.property)&&delete f.target[f.property]),Y[s].push(1);var h=o(r.dnstream,t),d=r.resultIn,v=o(r.upstream,t),_=r.resultFrom,g=!!r.lazy;V[s]||(V[s]={}),h.forEach(function(t){X[t]||(X[t]={}),X[t][s]||(X[t][s]={}),X[t][s][p]=1,V[s][t]||(V[s][t]={}),V[s][t][p]=1}),G[s]||(G[s]=[]),G[s].push(O(d)?d:null),X[s]||(X[s]={}),v.forEach(function(t){X[s][t]||(X[s][t]={}),X[s][t][p]=1,V[t]||(V[t]={}),V[t][s]||(V[t][s]={}),V[t][s][p]=1}),O(_)&&(H[s]={f:_,k:this.__kid,deps:v}),g&&(K[s]=!0),1===Y[s].length&&e(f.target,f.property,{get:function(t,n){if(H[s]&&0!==q[H[s].k]){var e=H[s].f.apply(null,H[s].deps.map(function(t){return l(null,t)}));l(null,s,e),u=e}else Q||(n!==undefined?u=t[n]:(f=c(s),u=f.target[f.property]));return u},set:function(n,e,r){n!==u&&(Q?u=I(u,n):(r===undefined&&(e=(f=c(s)).target,r=f.property),e[r]=I(e[r],n),u=e[r]),G[s]&&G[s].forEach(function(n,e){n&&0!==q[s+"#"+e]&&n.apply(t,[u])}),V[s]&&P(V[s],function(t,n){var e=!1;P(t,function(t,n){if(0!==q[n])return e=!0,!1}),e&&H[n]&&!K[n]&&l(null,n)}))},enumerable:!0},s),F(r,"value")&&l(null,s,r.value)}function f(t){if(!T(t))return!1;var n=!0,e={__isRelation:2,dnstream:1,resultIn:1,upstream:1,resultFrom:1,lazy:!0,value:!0},r=0;return P(t,function(t,i){return 2===e[i]?(n=!0,r++,!1):e[i]?void(1===e[i]&&r++):(n=!1,!1)}),n&&r>0}function s(t,e){var r;if(1===arguments.length){if(!T(t))return null;r=n(t,f,!0)}else{if(!T(e))return null;r=n(e,f,!0)}return P(r,function(n,e){new u(t,e,n)}),t}function c(t,n){if(n===undefined&&(n=U),!T(n)&&!j(n)||!Z(t))return null;var e=r(t,n),i=e.lastIndexOf(".");return{target:l(null,e.substring(0,i)),property:e.substring(i+1)}}function l(t,n,e){t=t||U;var i=arguments.length>=3,o=t,a=r(null,t),u=[];n&&(u=n.split("."));for(var f;u.length;){if(x(o))return undefined;f=u.shift(),a+=(""===a?"":".")+f,i&&0===u.length?!Q&&J[a]&&J[a].set?J[a].set(e,o,f):o[f]=I(o[f],e):o=!Q&&J[a]&&J[a].get?J[a].get(o,f):o[f]}return i?e:o}function p(t,n,e){Object.defineProperty?Object.defineProperty(t,n,e):"value"in e&&(t[n]=e.value)}function h(t,n){T(t)&&1===arguments.length&&(n=t),k(t)||(t=[]),n||(n={}),p(this,"__data",{value:t}),p(this,"length",{get:function(){return t.length},set:function(n){t.length=n}});var e=this,r=["set","push","pop","unshift","shift","splice"];r.forEach(function(t){p(e,"on"+t,{value:[]})}),r.forEach(function(t){e.addEventListener(t,n["on"+t])}),P(t,function(t,n){e.assignElement(n)})}function d(t,n,e){k(n)?e||(e=n[n.length-1]):(n=[n],e||(e=n[0]));var r={};P(n,function(t){P(t,function(t,n){n in r||(r[n]=t)})});var i=Object.keys(r);tt.refBeginsWithDollar&&(i=i.map(function(t){return"$"+t}));var o=Object.values(r);return new Function(i.join(","),"return ("+t+")").apply(e,o)}function v(t,n){t=_(t);var e=null;try{e=d(t,n)}catch(r){}return e}function _(t){var n=/{{([^{}]*)}}/g;return t.replace(n,function(t,n){return"' + ("+n+") + '"})}function g(t,n){var e=/{{([^{}]*)}}/g;return t.replace(e,function(t,e){return v(e,n)})}function y(t){t=";"+t+";";var n;return tt.refBeginsWithDollar?(n=/\$([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*/g,t.match(n).map(function(t){return t.substr(1)})):(n=/([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*/g,t.match(n))}function E(t,n){var e,r,i,o;tt.refBeginsWithDollar?(o=et.each12.exec(t))?(e=o[1].substr(1),r=o[3].substr(1),i=o[5].substr(1)):(e=(o=et.each11.exec(t))[1].substr(1),i=o[3].substr(1)):(o=et.each22.exec(t))?(e=o[1],r=o[3],i=o[5]):(e=(o=et.each21.exec(t))[1],i=o[3]);var a=R(i,n),u=l(a,i);return u instanceof h||l(a,i,u=new h(u)),{target:u,targetRef:i,iterator:{val:e,key:r}}}function A(t){var n=/{{([^{}]*)}}/g,e=[];return t.replace(n,function(t,n){return e.push(n),""}),e}function m(t,n,e,r,i){k(n)||(n=[n]);var o=j(e),a=function(){var a=(i||function(){return v(t,n)})();if(o&&"className"===r){var u=[];T(a)?P(a,function(t,n){t&&u.push(n)}):k(a)&&P(a,function(t){Z(t)?u.push(t):T(t)&&P(t,function(t,n){t&&u.push(n)})}),a=u.join(" ")}else if(o&&"style.cssText"===r){var f=[];T(a)&&P(a,function(t,n){f.push(n+":"+t)}),a=f.join(";")}if(o&&r.startsWith(tt.attrsFlag)){if(null!=a){var s=r.substr(tt.attrsFlag.length);e.setAttribute(s,a)}}else l(e,r,a)},u=function(t,n){var e=y(t),r={};P(e,function(t){var e=S(t,n);r[e]||(r[e]={}),r[e][t]=l(n[e],t)});var i=[];return P(r,function(t,e){i.push({target:n[e],refs:B(t)})}),i}(t,n).map(function(t){return{target:t.target,relations:function(){var n={};return t.refs.forEach(function(t){n[t]={resultIn:a}}),n}()}});return a(),u}function $(n,e,r){if(!j(n)||!T(e))return null;var i=(r=r?k(r)?r:[r]:[]).concat(e);if(n.nodeType!==Node.ELEMENT_NODE||n[rt.domBoundFlag]){if(n.nodeType===Node.TEXT_NODE){var o=n.nodeValue,a=A(o).join(";");if(""===a)return null;var u=n,f="nodeValue";"textarea"===n.parentNode.nodeName.toLowerCase()&&(u=n.parentNode,f="value"),m(a,i,u,f,function(){return g(o,i)}).forEach(function(t){s(t.target,t.relations)})}}else{if(n[rt.domBoundFlag]=!0,n.hasAttribute(tt.attrPrefix+"each")){var c=tt.attrPrefix+"each",p=E(n.getAttribute(c),e);n.removeAttribute(c);var h=n.parentNode;h.removeChild(n);var v=p.target;P(v,function(t,i){var o=n.cloneNode(!0),a={};a[p.iterator.val]=t,a[p.iterator.key]=i,$(o,e,[a].concat(r)),h.appendChild(o),v.on({push:function(t){},unshift:function(t){},pop:function(){},shift:function(){},splice:function(t,n,e){},set:function(t,n,e,r){}})}),v.on({push:function(t){},unshift:function(t){},pop:function(){},shift:function(){},splice:function(t,n,e){},set:function(t,n,e,r){}})}P(n,function(t){$(t,e,r)});var _=[];P(n.attributes,function(o,a){if(a.startsWith(tt.attrPrefix)){_.push(a),a=a.substr(tt.attrPrefix.length).toLowerCase();var u=L(a);if(u)t(n,u,function(t){d(o,[{e:t}].concat(i))},!0);else{if(it[n.nodeName.toLowerCase()]&&"value"===a){var f=tt.refBeginsWithDollar?o.substr(1):o,c=R(f,r,e);t(n,"input",function(t){l(c,f,this.value)},!1)}a=nt[a]?nt[a]:tt.attrsFlag+a,m(o,i,n,a).forEach(function(t){s(t.target,t.relations)})}}}),P(_,function(t){n.removeAttribute(t)})}return n}var N=function(){var t=0;return function(){return t++}}(),b=function(t){return"number"==typeof t},z=function(t){var n=parseInt(t);return!isNaN(n)&&(("number"==typeof t||"string"==typeof t)&&n==t)},Z=function(t){return"string"==typeof t},O=function(t){return"function"==typeof t},T=function(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)},k=function(t){return"[object Array]"===Object.prototype.toString.call(t)},x=function(t){return null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"function"==typeof t},j=function(t){return"function"==typeof Node&&t instanceof Node},D=function(t){return t instanceof NamedNodeMap},L=function(t){return!(!Z(t)||!t.startsWith("on"))&&t.substr(2)},P=function(t,n,e){var r,i;if(T(t)&&O(t.forEach))t.forEach(n);else if(T(t)){for(var o in t)if(t.hasOwnProperty(o)&&!1===n(t[o],o))break}else if(k(t))if(e)for(r=t.length-1;r>=0&&!1!==n(t[r],r);r--);else for(r=0,i=t.length;r<i&&!1!==n(t[r],r);r++);else if(j(t)){var a=!1;switch(t.nodeType){case Node.ELEMENT_NODE:break;case Node.TEXT_NODE:case Node.COMMENT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_TYPE_NODE:case Node.DOCUMENT_FRAGMENT_NODE:default:a=!0}if(a)return;var u=t.childNodes;for(r=0,i=u.length;r<i;r++)n(u[r]),P(u[r],n)}else if(D(t))for(r=0,i=t.length;r<i&&!1!==n(t[r].nodeValue,t[r].nodeName);r++);},C=function(t){var n=t;return T(t)?(n={},P(t,function(t,e){n[e]=C(t)})):k(t)&&(n=[],P(t,function(t){n.push(C(t))})),n},F=function(t,n){if(T(t))return t.hasOwnProperty(n);if(k(t)){var e=parseInt(n);return z(n)&&t.length>e&&e>=0}return!1},M=function(t,n,e){var r=Z(n)||b(n),i=r?t[n]:t;(T(i)||k(i))&&(P(i,function(t,n){M(i,n)}),k(i)&&w(i)),r&&(t[n]=e)},w=function(t,n){if(b(n))for(P(t,function(e,r){if(!(r>=n))return!1;t.length--},!0);t.length<n;)t.push(null);else P(t,function(n,e){n===undefined&&t.length--},!0);return t},I=function(t,n,e){function r(t,n,e){return T(n)?(P(n,function(n,i){!F(t,i)||x(n)?t[i]!==n&&(t[i]=C(n)):t[i]=r(t[i],n,e)}),e&&(P(t,function(e,r){F(n,r)||M(t,r)}),k(t)&&w(t)),t):n}if(!T(t))return n;var i=Array.prototype.slice.call(arguments,1,!0===arguments[arguments.length-1]?arguments.length-1:arguments.length);return e=!0===arguments[arguments.length-1],P(i,function(n){t=r(t,n,e)}),t},B=function(t){var n=[];return P(t,function(t,e){if(T(t)){var r=B(t);P(r,function(t){n.push(e+"."+t)})}else n.push(e)}),n},W=function(t,n){for(var e=t,r=n.split(".");r.length;){var i=r.shift();if(!F(e,i))return!1;e=e[i]}return!0},R=function(t,n){for(var e,r=Array.prototype.slice.call(arguments,1),i=0,o=r.length;i<o;i++)if(e=r[i],k(e)){var a=R.apply(null,[t].concat(e));if(a)return a}else if(W(e,t))return e},S=function(t,n){var e=n.length-1;return P(n,function(n,r){if(W(n,t))return e=r,!1}),e},U={},V={},G={},X={},H={},K={},Y={},q={},J={},Q=!!Object.defineProperty;u.prototype.disable=function(){q[this.__kid]=0},u.prototype.enable=function(){q[this.__kid]=1},u.prototype.destroy=function(){},h.prototype=[],h.prototype.constructor=h,h.prototype.addEventListener=function(t,n){var e=this;T(t)?P(t,function(t,n){e.addEventListener(n,t)}):this["on"+t]&&O(n)&&this["on"+t].push(n)},h.prototype.on=h.prototype.addEventListener,h.prototype.removeEventListener=function(t,n){var e=this;if(T(t))P(t,function(t,n){e.removeEventListener(n,t)});else if(this["on"+t]&&O(n)){var r=this["on"+t];P(r,function(t,e){if(t===n)return r.splice(e,1),!1})}},h.prototype.off=h.prototype.removeEventListener,h.prototype.dispatchEvent=function(t,n){n=Array.prototype.slice.call(arguments,1);var e=this;P(this["on"+t],function(t){t.apply(e,n)})},h.prototype.trigger=h.prototype.dispatchEvent,h.prototype.get=function(t){return this.__data[t]},h.prototype.set=function(t,n){var e=this.__data[t];x(e)||x(n)?(this.dispatchEvent("set",e,n,t,this.__data),this.__data[t]=n):I(e,n,!0)},h.prototype.assignElement=function(t){p(this,t,{get:function(){return this.get(t)},set:function(n){this.set(t,n)},configurable:!0,enumerable:!0})},h.prototype.deleteElement=function(){this.hasOwnProperty(this.length-1)&&delete this[this.length-1]},["push","unshift"].forEach(function(t){h.prototype[t]=function(n){this.__data[t](n),this.assignElement(this.length-1),this.dispatchEvent(t,n)}}),["pop","shift"].forEach(function(t){h.prototype[t]=function(){this.dispatchEvent(t,this.__data["pop"===t?this.length-1:0]),this.deleteElement(),this.__data[t]()}}),h.prototype.toArray=function(t){return t?this.__data:C(this.__data)},h.prototype.splice=function(t,n,e){(!b(t)||t<0)&&(t=0),t>=this.length&&(t=this.length),(!b(n)||n<0)&&(n=0),n+t>this.length&&(n=this.length-t);for(var r=[],i=t;i<t+n;i++)r.push(C(this.get(i)));for(var o=Array.prototype.slice.call(arguments,2),a=o.length,u=Math.min(n,a),f=t;f<t+u;f++)this.set(f,o[f-t]);if(n!==a){var s;n>a?(s=[t+a,n-a],Array.prototype.splice.apply(this.__data,s)):(s=[t+n,0].concat(o.slice(n)),Array.prototype.splice.apply(this.__data,s)),this.dispatchEvent.apply(this,["splice"].concat(s))}},h.prototype.forEach=function(t){for(var n=0;n<this.length&&!1!==t(this.get(n),n);n++);},["reverse","sort"].forEach(function(t){h.prototype[t]=function(){var n=C(this.__data);Array.prototype[t].apply(n,arguments);for(var e=0;e<this.length;e++)this.set(e,n[e])}}),["slice","concat","filter","map","reduce","indexOf","find","findIndex","fill","join"].forEach(function(t){h.prototype[t]=function(){return Array.prototype[t].apply(this.toArray(),arguments)}});var tt={attrPrefix:"m-",refBeginsWithDollar:!0,attrsFlag:"attrs."},nt={value:"value",checked:"checked",innertext:"innerText",innerhtml:"innerHTML","class":"className",style:"style.cssText"},et={each11:/^\s*(\$([a-zA-Z$_][0-9a-zA-Z$_]*))\s+in\s+(\$([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*)\s*$/,each12:/^\s*\(\s*(\$([a-zA-Z$_][0-9a-zA-Z$_]*))\s*,\s*(\$([a-zA-Z$_][0-9a-zA-Z$_]*))\s*\)\s+in\s+(\$([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*)\s*$/,each21:/^\s*(([a-zA-Z$_][0-9a-zA-Z$_]*))\s+in\s+(([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*)\s*$/,each22:/^\s*\(\s*(([a-zA-Z$_][0-9a-zA-Z$_]*))\s*,\s*(([a-zA-Z$_][0-9a-zA-Z$_]*))\s*\)\s+in\s+(([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*)\s*$/},rt={domBoundFlag:"__dmd_bound",domListKey:"__dmd_key"},it={input:!0,select:!0},ot=function(t,n){$.call(this,t,n)};return ot.kernel=u,ot.relate=s,ot.$=l,ot});
//# sourceMappingURL=domod.min.js.map
