!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.domod=n()}(this,function(){"use strict";function t(t,n,e,r){t.addEventListener?t.addEventListener(n,e,!!r):("input"===n&&(n="propertychange"),t.attachEvent("on"+n,e))}function n(t,e,r){e=e||function(){return!0};var i={};return C(t,function(t,o){if(T(t)&&!e(t)){var a=n(t,e,r);C(a,function(t,n){i[o+"."+n]=t})}else!e(t)&&r||(i[o]=t)}),i}function e(t,n,e){Object.defineProperty?Object.defineProperty(t,n,e):"value"in e&&(t[n]=e.value)}function r(t,n){T(t)&&1===arguments.length&&(n=t),k(t)||(t=[]),n||(n={}),e(this,"__data",{value:t}),e(this,"length",{get:function(){return t.length},set:function(n){t.length=n}});var r=this,i=["set","push","pop","unshift","shift","splice"];i.forEach(function(t){e(r,"on"+t,{value:[]})}),i.forEach(function(t){r.addEventListener(t,n["on"+t])}),C(t,function(t,n){r.assignElement(n)})}function i(t,n,e,i){j(t)?("value"in e&&(t[n]=e.value),i=i||o(n,t),!Q[i]&&("get"in e||"set"in e)&&(Q[i]={}),"get"in e&&(Q[i].get=e.get),"set"in e&&(Q[i].set=e.set)):D(t,r)?e.set&&t.on("set",function(t,r,i,o){i==n&&e.set(r)}):Object.defineProperty(t,n,e)}function o(t,n){if(n===undefined)return t;var e=a(n);return null==e?t||"":e+(t?"."+t:"")}function a(t){if(t===V||!T(t)&&!j(t))return null;if(!t.__kernel_root){var n="kr_"+N();i(t,"__kernel_root",{value:n}),V[n]=t}return t.__kernel_root}function u(t,n){return(T(t)||Z(t))&&(t=[t]),k(t)?t.map(function(t){return T(t)?a(t.root)+"."+t.alias:Z(t)?a(n)+"."+t:null}):[]}function s(t){return q[t]===undefined?0:q[t].length}function f(t,n,e){var o,f={};if(null!=(f=p(n,t))){o=f.target[f.property];var c=a(t)+"."+n,l=c+"#"+s(c);i(this,"__kid",{value:l}),J[this.__kid]=1,q[c]===undefined&&(q[c]=[],M(f.target,f.property)&&!D(f.target,r)&&delete f.target[f.property]),q[c].push(1);var d=u(e.dnstream,t),v=e.resultIn,g=u(e.upstream,t),_=e.resultFrom,y=!!e.lazy;G[c]||(G[c]={}),d.forEach(function(t){H[t]||(H[t]={}),H[t][c]||(H[t][c]={}),H[t][c][l]=1,G[c][t]||(G[c][t]={}),G[c][t][l]=1}),X[c]||(X[c]=[]),X[c].push(O(v)?v:null),H[c]||(H[c]={}),g.forEach(function(t){H[c][t]||(H[c][t]={}),H[c][t][l]=1,G[t]||(G[t]={}),G[t][c]||(G[t][c]={}),G[t][c][l]=1}),O(_)&&(K[c]={f:_,k:this.__kid,deps:g}),y&&(Y[c]=!0),1===q[c].length&&i(f.target,f.property,{get:function(){if(K[c]&&0!==J[K[c].k]){var t=K[c].f.apply(null,K[c].deps.map(function(t){return h(null,t)}));h(null,c,t),o=t}return o},set:function(n,e){(e||n!==o)&&(n!==o&&(!D(f.target,r)||T(o)&&T(n)?o=B(o,n):(f.target.set(f.property,n),o=f.target[f.property])),X[c]&&X[c].forEach(function(n,e){n&&0!==J[c+"#"+e]&&n.apply(t,[o])}),G[c]&&C(G[c],function(t,n){var e=!1;C(t,function(t,n){if(0!==J[n])return e=!0,!1}),e&&K[n]&&!Y[n]&&h(null,n)}))},enumerable:!0},c),M(e,"value")&&h(null,c,e.value)}}function c(t){if(!T(t))return!1;var n=!0,e={__isRelation:2,dnstream:1,resultIn:1,upstream:1,resultFrom:1,lazy:!0,value:!0},r=0;return C(t,function(t,i){return 2===e[i]?(n=!0,r++,!1):e[i]?void(1===e[i]&&r++):(n=!1,!1)}),n&&r>0}function l(t,e){var r;if(1===arguments.length){if(!T(t))return null;r=n(t,c,!0)}else{if(!T(e))return null;r=n(e,c,!0)}return C(r,function(n,e){new f(t,e,n)}),t}function p(t,n){if(n===undefined&&(n=V),!T(n)&&!j(n)||!Z(t))return null;var e=o(t,n),r=e.lastIndexOf(".");return{target:h(null,e.substring(0,r)),property:e.substring(r+1)}}function h(t,n,e){t=t||V;var i=arguments.length>=3,a=t,u=o(null,t),s=[];n&&(s=n.split("."));for(var f;s.length;){if(x(a))return undefined;f=s.shift(),u+=(""===u?"":".")+f,i&&0===s.length?!D(a,r)||T(a[f])&&T(val)?a[f]=B(a[f],e):a.set(f,val):a=a[f]}return i?a[f]:a}function d(t,n,e){tt.refBeginsWithDollar&&(t=t.replace(et.assign1,function(t,n){return t.replace(n,"this."+n.substr(1))})),k(n)?e||(e=n[n.length-1]):(n=[n],e||(e=n[0]));var r={};C(n,function(t){C(t,function(t,n){n in r||(r[n]=t)})});var i=Object.keys(r);tt.refBeginsWithDollar&&(i=i.map(function(t){return"$"+t}));var o=Object.values(r);return new Function(i.join(","),"return ("+t+")").apply(e,o)}function v(t,n){t=g(t);var e=null;try{e=d(t,n)}catch(r){}return e}function g(t){var n=/{{([^{}]*)}}/g;return t.replace(n,function(t,n){return"' + ("+n+") + '"})}function _(t,n){var e=/{{([^{}]*)}}/g;return t.replace(e,function(t,e){return v(e,n)})}function y(t){t=";"+t+";";var n;return tt.refBeginsWithDollar?(n=/\$([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*/g,t.match(n).map(function(t){return t.substr(1)})):(n=/([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*/g,t.match(n))}function E(t,n){var e,i,o,a;tt.refBeginsWithDollar?(a=et.each12.exec(t))?(e=a[1].substr(1),i=a[3].substr(1),o=a[5].substr(1)):(e=(a=et.each11.exec(t))[1].substr(1),o=a[3].substr(1)):(a=et.each22.exec(t))?(e=a[1],i=a[3],o=a[5]):(e=(a=et.each21.exec(t))[1],o=a[3]);var u=S(o,n),s=h(u,o);return s instanceof r||h(u,o,s=new r(s)),{target:s,targetRef:o,iterator:{val:e,key:i}}}function A(t){var n=/{{([^{}]*)}}/g,e=[];return t.replace(n,function(t,n){return e.push(n),""}),e}function $(t,n,e,r,i){k(n)||(n=[n]);var o=j(e),a=function(){var a=(i||function(){return v(t,n)})();if(o&&"className"===r){var u=[];T(a)?C(a,function(t,n){t&&u.push(n)}):k(a)&&C(a,function(t){Z(t)?u.push(t):T(t)&&C(t,function(t,n){t&&u.push(n)})}),a=u.join(" ")}else if(o&&"style.cssText"===r){var s=[];T(a)&&C(a,function(t,n){s.push(n+":"+t)}),a=s.join(";")}if(o&&r.startsWith(tt.attrsFlag)){if(null!=a){var f=r.substr(tt.attrsFlag.length);e.setAttribute(f,a)}}else h(e,r,a)},u=function(t,n){var e=y(t),r={};C(e,function(t){var e=U(t,n);r[e]||(r[e]={}),r[e][t]=h(n[e],t)});var i=[];return C(r,function(t,e){i.push({target:n[e],refs:W(t)})}),i}(t,n).map(function(t){return{target:t.target,relations:function(){var n={};return t.refs.forEach(function(t){n[t]={resultIn:a}}),n}()}});return a(),u}function m(n,e,r){if(!j(n)||!T(e))return null;var i=(r=r?k(r)?r:[r]:[]).concat(e);if(n.nodeType!==Node.ELEMENT_NODE||n[rt.domBoundFlag]){if(n.nodeType===Node.TEXT_NODE){var o=n.nodeValue,a=A(o).join(";");if(""===a)return null;var u=n,s="nodeValue";"textarea"===n.parentNode.nodeName.toLowerCase()&&(u=n.parentNode,s="value"),$(a,i,u,s,function(){return _(o,i)}).forEach(function(t){l(t.target,t.relations)})}}else{if(n[rt.domBoundFlag]=!0,n.hasAttribute(tt.attrPrefix+"each")){var f=tt.attrPrefix+"each",c=E(n.getAttribute(f),e);n.removeAttribute(f);var p=n.parentNode;p.removeChild(n);var v=c.target;function g(t,i){var o=n.cloneNode(!0),a={};a[c.iterator.val]=t,a[c.iterator.key]=i,m(o,e,[a].concat(r)),p.appendChild(o),v.on({push:function(t){},unshift:function(t){},pop:function(){},shift:function(){},splice:function(t,n,e){},set:function(t,n,e,r){e==i&&(console.log("set",e,n),a[c.iterator.val]=n)}})}C(v,g),v.on({push:function(t){console.log("push",t,v.length-1),g(t,v.length-1)},unshift:function(t){},pop:function(){},shift:function(){},splice:function(t,n,e){},set:function(t,n,e,r){}})}C(n,function(t){m(t,e,r)});var y=[];C(n.attributes,function(o,a){if(a.startsWith(tt.attrPrefix)){y.push(a),a=a.substr(tt.attrPrefix.length).toLowerCase();var u=P(a);if(u)t(n,u,function(t){d(o,[{e:t}].concat(i))},!0);else{if(it[n.nodeName.toLowerCase()]&&"value"===a){var s=tt.refBeginsWithDollar?o.substr(1):o,f=S(s,r,e);t(n,"input",function(t){h(f,s,this.value)},!1)}a=nt[a]?nt[a]:tt.attrsFlag+a,$(o,i,n,a).forEach(function(t){l(t.target,t.relations)})}}}),C(y,function(t){n.removeAttribute(t)})}return n}var N=function(){var t=0;return function(){return t++}}(),b=function(t){return"number"==typeof t},z=function(t){var n=parseInt(t);return!isNaN(n)&&(("number"==typeof t||"string"==typeof t)&&n==t)},Z=function(t){return"string"==typeof t},O=function(t){return"function"==typeof t},T=function(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)},k=function(t){return"[object Array]"===Object.prototype.toString.call(t)},x=function(t){return null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"function"==typeof t},D=function(t,n){return"function"==typeof n&&t instanceof n},j=function(t){return"function"==typeof Node&&t instanceof Node},L=function(t){return t instanceof NamedNodeMap},P=function(t){return!(!Z(t)||!t.startsWith("on"))&&t.substr(2)},C=function(t,n,e){var r,i;if(T(t)&&O(t.forEach))t.forEach(n);else if(T(t)){for(var o in t)if(t.hasOwnProperty(o)&&!1===n(t[o],o))break}else if(k(t))if(e)for(r=t.length-1;r>=0&&!1!==n(t[r],r);r--);else for(r=0,i=t.length;r<i&&!1!==n(t[r],r);r++);else if(j(t)){var a=!1;switch(t.nodeType){case Node.ELEMENT_NODE:break;case Node.TEXT_NODE:case Node.COMMENT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_TYPE_NODE:case Node.DOCUMENT_FRAGMENT_NODE:default:a=!0}if(a)return;var u=t.childNodes;for(r=0,i=u.length;r<i;r++)n(u[r]),C(u[r],n)}else if(L(t))for(r=0,i=t.length;r<i&&!1!==n(t[r].nodeValue,t[r].nodeName);r++);},F=function(t){var n=t;return T(t)?(n={},C(t,function(t,e){n[e]=F(t)})):k(t)&&(n=[],C(t,function(t){n.push(F(t))})),n},M=function(t,n){if(T(t))return t.hasOwnProperty(n);if(k(t)){var e=parseInt(n);return z(n)&&t.length>e&&e>=0}return!1},w=function(t,n,e){var r=Z(n)||b(n),i=r?t[n]:t;(T(i)||k(i))&&(C(i,function(t,n){w(i,n)}),k(i)&&I(i)),r&&(t[n]=e)},I=function(t,n){if(b(n))for(C(t,function(e,r){if(!(r>=n))return!1;t.length--},!0);t.length<n;)t.push(null);else C(t,function(n,e){n===undefined&&t.length--},!0);return t},B=function(t,n,e,r){function i(t,n,e){return T(n)?(C(n,function(n,r){!M(t,r)||x(n)?t[r]!==n&&(t[r]=F(n)):t[r]=i(t[r],n,e)}),e&&(C(t,function(e,r){M(n,r)||w(t,r)}),k(t)&&I(t)),t):n}if(!T(t))return n;var o,a=0;undefined,e=!1;var u=arguments[arguments.length-1];return O(u)?(a=2,u,e=!!arguments[arguments.length-2]):!0===u&&(a=1,e=u),o=Array.prototype.slice.call(arguments,1,arguments.length-a),C(o,function(n){t=i(t,n,e)}),t},W=function(t){if(t instanceof Array)return[];var n=[];return C(t,function(t,e){if(n.push(e),T(t)){var r=W(t);C(r,function(t){n.push(e+"."+t)})}}),n},R=function(t,n){for(var e=t,r=n.split(".");r.length;){var i=r.shift();if(!M(e,i))return!1;e=e[i]}return!0},S=function(t,n){for(var e,r=Array.prototype.slice.call(arguments,1),i=0,o=r.length;i<o;i++)if(e=r[i],k(e)){var a=S.apply(null,[t].concat(e));if(a)return a}else if(R(e,t))return e},U=function(t,n){var e=n.length-1;return C(n,function(n,r){if(R(n,t))return e=r,!1}),e};r.prototype=[],r.prototype.constructor=r,r.prototype.addEventListener=function(t,n){var e=this;T(t)?C(t,function(t,n){e.addEventListener(n,t)}):this["on"+t]&&O(n)&&this["on"+t].push(n)},r.prototype.on=r.prototype.addEventListener,r.prototype.removeEventListener=function(t,n){var e=this;if(T(t))C(t,function(t,n){e.removeEventListener(n,t)});else if(this["on"+t]&&O(n)){var r=this["on"+t];C(r,function(t,e){if(t===n)return r.splice(e,1),!1})}},r.prototype.off=r.prototype.removeEventListener,r.prototype.dispatchEvent=function(t,n){n=Array.prototype.slice.call(arguments,1);var e=this;C(this["on"+t],function(t){t.apply(e,n)})},r.prototype.trigger=r.prototype.dispatchEvent,r.prototype.get=function(t){return this.__data[t]},r.prototype.set=function(t,n){var e=this.__data[t];x(e)||x(n)?(this.dispatchEvent("set",e,n,t,this.__data),this.__data[t]=n):B(e,n,!0)},r.prototype.assignElement=function(t){e(this,t,{get:function(){return this.get(t)},set:function(n){this.set(t,n)},configurable:!0,enumerable:!0})},r.prototype.deleteElement=function(){this.hasOwnProperty(this.length-1)&&delete this[this.length-1]},["push","unshift"].forEach(function(t){r.prototype[t]=function(n){this.__data[t](n),this.assignElement(this.length-1),this.dispatchEvent(t,n)}}),["pop","shift"].forEach(function(t){r.prototype[t]=function(){this.dispatchEvent(t,this.__data["pop"===t?this.length-1:0]),this.deleteElement(),this.__data[t]()}}),r.prototype.toArray=function(t){return t?this.__data:F(this.__data)},r.prototype.splice=function(t,n,e){(!b(t)||t<0)&&(t=0),t>=this.length&&(t=this.length),(!b(n)||n<0)&&(n=0),n+t>this.length&&(n=this.length-t);for(var r=[],i=t;i<t+n;i++)r.push(F(this.get(i)));for(var o=Array.prototype.slice.call(arguments,2),a=o.length,u=Math.min(n,a),s=t;s<t+u;s++)this.set(s,o[s-t]);if(n!==a){var f;n>a?(f=[t+a,n-a],Array.prototype.splice.apply(this.__data,f)):(f=[t+n,0].concat(o.slice(n)),Array.prototype.splice.apply(this.__data,f)),this.dispatchEvent.apply(this,["splice"].concat(f))}},r.prototype.forEach=function(t){for(var n=0;n<this.length&&!1!==t(this.get(n),n);n++);},["reverse","sort"].forEach(function(t){r.prototype[t]=function(){var n=F(this.__data);Array.prototype[t].apply(n,arguments);for(var e=0;e<this.length;e++)this.set(e,n[e])}}),["slice","concat","filter","map","reduce","indexOf","find","findIndex","fill","join"].forEach(function(t){r.prototype[t]=function(){return Array.prototype[t].apply(this.toArray(),arguments)}});var V={},G={},X={},H={},K={},Y={},q={},J={},Q={};f.prototype.disable=function(){J[this.__kid]=0},f.prototype.enable=function(){J[this.__kid]=1},f.prototype.destroy=function(){};var tt={attrPrefix:"m-",refBeginsWithDollar:!0,attrsFlag:"attrs."},nt={value:"value",checked:"checked",innertext:"innerText",innerhtml:"innerHTML","class":"className",style:"style.cssText"},et={assign1:/(\$[a-zA-Z$_][0-9a-zA-Z$_]*)\s*=[^=]/g,each11:/^\s*(\$([a-zA-Z$_][0-9a-zA-Z$_]*))\s+in\s+(\$([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*)\s*$/,each12:/^\s*\(\s*(\$([a-zA-Z$_][0-9a-zA-Z$_]*))\s*,\s*(\$([a-zA-Z$_][0-9a-zA-Z$_]*))\s*\)\s+in\s+(\$([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*)\s*$/,each21:/^\s*(([a-zA-Z$_][0-9a-zA-Z$_]*))\s+in\s+(([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*)\s*$/,each22:/^\s*\(\s*(([a-zA-Z$_][0-9a-zA-Z$_]*))\s*,\s*(([a-zA-Z$_][0-9a-zA-Z$_]*))\s*\)\s+in\s+(([a-zA-Z$_][0-9a-zA-Z$_]*)(\.[a-zA-Z$_][0-9a-zA-Z$_]*)*)\s*$/},rt={domBoundFlag:"__dmd_bound",domListKey:"__dmd_key"},it={input:!0,select:!0},ot=function(t,n){m.call(this,t,n)};return ot.kernel=f,ot.relate=l,ot.$=h,ot});
//# sourceMappingURL=domod.min.js.map
