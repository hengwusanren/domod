{"version":3,"file":"domod.js","sources":["../src/index.js","../src/Util.js","../src/AliasDOM.js","../src/ObservableArray.js","../src/DataBinding.js"],"sourcesContent":["import './Polyfill'\nimport * as Util from './Util'\nimport { AliasDOM, Alias } from './AliasDOM'\nimport BindData from './DataBinding'\n\n/* Initialize the reference space. */\nvar DMDRefSpace = BindData();\n\n/**\n * Bind data to DOM.\n * @param  {Object} ref                 [description]\n * @param  {HTMLElement|AliasDOM} $el   [description]\n * @param  {Object} relation            [description]\n * @return {[type]}                     [description]\n * @note   如果有relation，则认为是active模式，否则是passive模式；active模式会主动去\n *         遍历relation的属性进行绑定；passive模式会遍历$el的DOM属性\n */\nfunction Bind(ref, $el, relation) {\n    if (!Util.isObject(ref)) return;\n    BindData(ref);\n\n    var _this = this;\n\n    if (Util.isInstance($el, AliasDOM)) {\n        Util.each($el, function (dom) {\n            Bind(ref, dom);\n        });\n        return;\n    }\n\n    if (!Util.isNode($el)) return;\n\n    /**\n     * 绑定/渲染模式\n     * @type {String}\n     * @note \"active\"模式: 指定ref和$el之间的relation，主动进行双向绑定，不依赖于dom标签中的属性和模板；\n     *           绑定逻辑可分离为配置对象；可以达到渲染和绑定分离的目的，所以如果是SSR则更推荐这种模式.\n     *       \"passive\"模式: 依赖于dom标签内定义的属性和模板，进行解析；渲染与绑定逻辑耦合，模板即组件.\n     */\n    var mode = Util.isObject(relation) ? 'active' : 'passive';\n\n    if (mode === 'active') {\n        Util.each(relation, function (v, p) {\n            switch (p) {\n                case 'show':\n                case 'innerText':\n                case 'innerHTML':\n                case 'className':\n                case 'style':\n                    break;\n                default:\n                    var pNum = parseInt(p);\n                    if (!isNaN(pNum)) { /* Node Index */\n                    } else if (Util.isEventName(p)) { /* Event */\n                    } else if (Util.isCSSSelector(p)) { /* CSS Selector */\n                    } else { /* Attribute */\n                    }\n            }\n        });\n    } else {\n        if ($el.nodeType === Node.ELEMENT_NODE) {\n            Util.each($el.attributes, function (value, name) {\n                if (!name.startsWith(_this.attrPrefix)) return;\n                name = name.substr(_this.attrPrefix.length);\n                switch (name) {\n                    case 'show':\n                        break;\n                    case 'text':\n                        break;\n                    case 'html':\n                        break;\n                    case 'class':\n                        break;\n                    case 'style':\n                        break;\n                    default:\n                        if (Util.isEventName(name)) { /* Event */\n                        } else { /* Attribute */\n                        }\n                }\n            });\n            Util.each($el, function (node) {\n                Bind(ref, node);\n            });\n        } else if ($el.nodeType === Node.TEXT_NODE) {\n            // TODO\n        }\n    }\n}\n\n/**\n * Default configurations.\n * @type {Object}\n */\nvar DefaultConf = {\n    attrPrefix: 'm-',\n    refSeparator: '/',\n    tmplGrammer: 'dollarbrace',\n    tmplEngine: {\n        parseDeps: function (tmpl) {\n\n        },\n        classParser: function () {},\n        styleParser: function () {},\n        eventParser: function () {},\n        attrValueParser: function () {},\n        textValueParser: function (tmpl, executor) {\n            return tmpl.replace(/{([^{}]*)}/ig, function (match, p1, offset, string) {\n                return executor(p1);\n            });\n        }\n    }\n};\n\nDMD_Constructor: {\n    var DMD = function ($el, option) {\n        this.$el = $el || window.document.body;\n\n        this.defaults = {};\n        Util.extend(this.defaults, DefaultConf, option);\n    };\n\n    DMD.prototype.alias = function (map) {\n        return Alias(map, this.$el);\n    };\n\n    DMD.prototype.bind = function (ref, relation) {\n        return Bind(ref, this.$el, relation);\n    };\n}\n\nDMD_Factory: {\n    var factory = function ($el, option) {\n        return new DMD($el, option);\n    };\n    factory.defaults = Util.clone(DefaultConf);\n    factory.alias = Alias;\n    factory.data = BindData;\n    factory.bind = Bind;\n}\n\nexport default factory\n","var gid = (function () {\n    var n = 0;\n    return function () {\n        return n++;\n    };\n})();\n\nvar isNumber = function (v) {\n    return typeof v === 'number';\n};\n\nvar isNumeric = function (v) {\n    var n = parseInt(v);\n    if (isNaN(n)) return false;\n    return (typeof v === 'number' || typeof v === 'string') && n == v;\n};\n\nvar isString = function (v) {\n    return typeof v === 'string';\n};\n\nvar isFunction = function (v) {\n    return typeof v === 'function';\n};\n\nvar isObject = function (v) {\n    return Object.prototype.toString.call(v) === '[object Object]';\n};\n\nvar isArray = function (v) {\n    return Object.prototype.toString.call(v) === '[object Array]';\n};\n\nvar isBasic = function (v) {\n    return v == null\n        || typeof v === 'boolean'\n        || typeof v === 'number'\n        || typeof v === 'string'\n        || typeof v === 'function';\n};\n\nvar isInstance = function (v, creator) {\n    return typeof creator === 'function' && v instanceof creator;\n};\n\nvar isDirectInstance = function (v, creator) {\n    return v.constructor === creator;\n};\n\nvar isNode = function (v) {\n    return v instanceof Node;\n};\n\nvar isNamedNodeMap = function (v) {\n    return v instanceof NamedNodeMap;\n};\n\nvar isEventName = function (v) {\n    if (!isString(v)) return false;\n    return v.startsWith('on'); // TODO\n};\n\nvar isCSSSelector = function (v) {\n    return v.indexOf(' ') > 0 || v.indexOf('.') >= 0\n        || v.indexOf('[') >= 0 || v.indexOf('#') >= 0;\n};\n\nvar each = function (v, func, arrayReverse) {\n    if (isObject(v)) {\n        for (var p in v) {\n            if (!v.hasOwnProperty(p)) continue;\n            var r = func(v[p], p);\n            if (r === false) break;\n        }\n    } else if (isArray(v)) {\n        if (!arrayReverse) {\n            for (var i = 0, len = v.length; i < len; i++) {\n                var r = func(v[i], i);\n                if (r === false) break;\n            }\n        } else {\n            for (var i = v.length - 1; i >= 0; i--) {\n                var r = func(v[i], i);\n                if (r === false) break;\n            }\n        }\n    } else if (isNode(v)) {\n        var ret = false;\n        switch (v.nodeType) {\n            case Node.ELEMENT_NODE:\n                break;\n            case Node.TEXT_NODE:\n            case Node.COMMENT_NODE:\n            case Node.PROCESSING_INSTRUCTION_NODE:\n            case Node.DOCUMENT_NODE:\n            case Node.DOCUMENT_TYPE_NODE:\n            case Node.DOCUMENT_FRAGMENT_NODE:\n            default:\n                ret = true;\n        }\n        if (ret) return;\n        for (var i = 0, childNodes = v.childNodes, len = v.childNodes.length; i < len; i++) {\n            func(childNodes[i]);\n            each(childNodes[i], func);\n        }\n    } else if (isNamedNodeMap(v)) {\n        for (var i = 0, len = v.length; i < len; i++) {\n            var r = func(v[i]['nodeValue'], v[i]['nodeName']);\n            if (r === false) break;\n        }\n    } else if (Util.isFunction(v.forEach)) {\n        v.forEach(func);\n    }\n};\n\nvar clone = function (val) {\n    var r = val;\n    if (isObject(val)) {\n        r = {};\n        each(val, function (v, p) {\n            r[p] = clone(v);\n        });\n    } else if (isArray(val)) {\n        r = [];\n        each(val, function (v) {\n            r.push(clone(v));\n        });\n    }\n    return r;\n};\n\nvar hasProperty = function (val, p) {\n    if (isObject(val)) {\n        return val.hasOwnProperty(p);\n    } else if (isArray(val)) {\n        var n = parseInt(p);\n        return isNumeric(p) && val.length > n && n >= 0;\n    }\n    return false;\n};\n\nvar clear = function (val, p, withBasicVal) {\n    var inRef = isString(p) || isNumber(p);\n    var target = inRef ? val[p] : val;\n\n    if (isObject(target) || isArray(target)) {\n        each(target, function (v, p) {\n            clear(target, p);\n        });\n        if (isArray(target)) {\n            shrinkArray(target);\n        }\n    }\n\n    if (inRef) {\n        val[p] = withBasicVal;\n    }\n};\n\nvar shrinkArray = function (arr, len) {\n    var limited = isNumber(len);\n    if (!limited) {\n        each(arr, function (v, i) {\n            if (v === undefined) arr.length--;\n        }, true);\n    } else {\n        each(arr, function (v, i) {\n            if (i >= len) arr.length--;\n            else return false;\n        }, true);\n        while (arr.length < len) {\n            arr.push(null);\n        }\n    }\n    return arr;\n};\n\nvar touchLeaves = function (obj) {\n    each(obj, function (v, p) {\n        if (isBasic(v)) {\n            obj[p] = v;\n        } else {\n            touchLeaves(v);\n        }\n    });\n};\n\nvar extend = function (dest, srcs, clean) {\n    if (!isObject(dest)) return null;\n    var args = Array.prototype.slice.call(arguments, 1,\n        arguments[arguments.length - 1] === true ? (arguments.length - 1) : arguments.length);\n\n    function extendObj(obj, src, clean) {\n        if (!isObject(src)) return;\n        each(src, function (v, p) {\n            if (!hasProperty(obj, p) || isBasic(v)) {\n                if (obj[p] !== v) {\n                    obj[p] = clone(v);\n                }\n            } else {\n                extendObj(obj[p], v, clean);\n            }\n        });\n        if (clean) {\n            each(obj, function (v, p) {\n                if (!hasProperty(src, p)) {\n                    clear(obj, p);\n                }\n            });\n            if (isArray(obj)) {\n                shrinkArray(obj);\n            }\n        }\n    }\n\n    each(args, function (src) {\n        extendObj(dest, src, clean);\n    });\n    return dest;\n};\n\nexport {\n    gid,\n    isNumber,\n    isNumeric,\n    isString,\n    isFunction,\n    isObject,\n    isArray,\n    isBasic,\n    isInstance,\n    isDirectInstance,\n    isNode,\n    isNamedNodeMap,\n    isEventName,\n    isCSSSelector,\n    each,\n    clone,\n    hasProperty,\n    clear,\n    shrinkArray,\n    touchLeaves,\n    extend\n}\n","import * as Util from './Util'\n\n/**\n * Alias DOM constructor function.\n * @param  {Object|String} map              Selector-alias map.\n * @param  {HTMLElement|Undefined} $el      Root element.\n * @return {Object}                         Result table.\n */\nvar AliasDOM = function (map, $el) {\n    var ifJoinAlias = !!map.join;\n    var aliasSeparator = '/';\n\n    function isKeyword(w) {\n        return w === 'alias' || w === 'lazy' || w === 'join';\n    }\n\n    (function lazyDown(map) {\n        if (!Util.isObject(map)) return;\n        if (map.lazy) {\n            Util.each(map, function (v, p) {\n                if (isKeyword(p)) return;\n                if (Util.isString(v)) {\n                    map[p] = {\n                        alias: v,\n                        lazy: true\n                    };\n                } else if (Util.isObject(v)) {\n                    v.lazy = true;\n                }\n            });\n        }\n        Util.each(map, lazyDown);\n    })(map);\n\n    (function alias(map, $root, obj, fullSel, fullAlias) {\n        map = Util.isString(map) ? { alias: map } : (Util.isObject(map) ? map : {});\n        $root = $root || window.document.body;\n        obj = obj || {};\n        !obj.__root && Object.defineProperty(obj, '__root', { value: $root });\n        fullSel = fullSel || [];\n        fullAlias = fullAlias || [];\n\n        function querySelector($parent, sel) {\n            if (!sel) return $parent;\n            var $targets = Array.prototype.slice.call($parent.querySelectorAll(sel));\n            if ($targets.length < 1) return null;\n            if ($targets.length === 1) return $targets[0];\n            return $targets;\n        }\n\n        if (map.alias) {\n            fullAlias = fullAlias.concat(map.alias);\n            var aliasProperty = ifJoinAlias ? fullAlias.join(aliasSeparator) : map.alias;\n            if (map.lazy) {\n                Object.defineProperty(obj, aliasProperty, {\n                    get: function () {\n                        return querySelector(this.__root, fullSel.join(' '));\n                    },\n                    enumerable: true\n                });\n            } else {\n                obj[aliasProperty] = querySelector($root, fullSel.join(' '));\n            }\n        }\n\n        Util.each(map, function (v, sel) {\n            if (isKeyword(sel)) return;\n            alias(v, $root, obj, fullSel.concat(sel), fullAlias);\n        });\n\n        return obj;\n    })(map, $el, this);\n};\n\n/**\n * Alias DOM factory function.\n */\nvar Alias = function (map, $el) {\n    return new AliasDOM(map, $el);\n};\n\nexport { AliasDOM, Alias }\n","import * as Util from './Util'\n\nvar canUseProxy = typeof Proxy === 'function';\n\nvar OArray = function (arr, option) {\n    if (!Util.isArray(arr)) arr = [];\n    if (!Util.isObject(option)) option = {};\n\n    Object.defineProperty(this, 'afterInsertElement', {\n        value: option.afterInsertElement || function (target, p) {}\n    });\n    Object.defineProperty(this, 'beforeDeleteElement', {\n        value: option.beforeDeleteElement || function (target, p) {}\n    });\n    Object.defineProperty(this, 'elementEquality', {\n        value: option.elementEquality || function (v1, v2) { return v1 === v2; }\n    });\n\n    var len = 0;\n    Object.defineProperty(this, '__length', {\n        get: function () {\n            return len;\n        },\n        set: function (v) {\n            return len = v;\n        }\n    });\n    Object.defineProperty(this, 'length', {\n        get: function () {\n            return this.__length;\n        },\n        set: function (v) {\n            if (!Util.isNumber(v)) return false;\n            var n = parseInt(v);\n            if (isNaN(n) || n < 0) return false;\n            if (n > this.__length) {\n                for (var i = this.__length; i < n; i++)\n                    this.push(undefined);\n            } else if (n < this.__length) {\n                for (var i = this.__length - 1; i >= n; i--)\n                    this.pop();\n            }\n            return this.__length;\n        }\n    });\n\n    var extendable = false;\n    Object.defineProperty(this, '__extendable', {\n        get: function () {\n            return extendable;\n        },\n        set: function (v) {\n            return extendable = !!v;\n        }\n    });\n\n    var _this = this;\n    this.__extendable = true;\n    Util.each(arr, function (v, i) {\n        _this.push(v);\n    });\n    this.__extendable = false;\n};\n\nOArray.prototype = [];\nOArray.prototype.constructor = OArray;\n\nOArray.prototype.assignElement = function (i, val) {\n    if (!Util.isNumber(i)) return false;\n    if (this.hasOwnProperty(i)) {\n        this[i] = val;\n    } else if (this.__extendable) {\n        var v = val;\n        Object.defineProperty(this, i, {\n            get: function () {\n                return v;\n            },\n            set: function (_v) {\n                return v = _v;\n            },\n            configurable: true,\n            enumerable: true\n        });\n    } else {\n        return false;\n    }\n};\n\nOArray.prototype.deleteElement = function (i) {\n    if (!Util.isNumber(i) || !this.hasOwnProperty(i)) return false;\n    delete this[i];\n    return true;\n};\n\nOArray.prototype.push = function (v) {\n    this.__extendable = true;\n    this.assignElement(this.__length, v);\n    this.__extendable = false;\n    this.__length++;\n    return this.__length;\n};\n\nOArray.prototype.pop = function (v) {\n    if (this.deleteElement(this.__length - 1)) this.__length -= 1;\n    return this.__length;\n};\n\nOArray.prototype.offset = function (startIndex, howManyElements, howManySteps, notClean) {\n    if (!Util.isNumber(startIndex) || startIndex < 0 || startIndex >= this.__length) return false;\n    if (!Util.isNumber(howManySteps) || howManySteps === 0) return false;\n    if (!Util.isNumber(howManyElements) || howManyElements <= 0\n        || howManyElements + startIndex > this.__length) howManyElements = this.__length - startIndex;\n    this.__extendable = true;\n    if (howManySteps > 0) { /* to right */\n        for (var i = startIndex + howManyElements - 1 + howManySteps; i >= startIndex + howManySteps; i--) {\n            this.assignElement(i, this[i - howManySteps]);\n        }\n        if (!notClean) {\n            for (var i = startIndex; i < startIndex + howManySteps; i++) {\n                this.assignElement(i, undefined);\n            }\n        }\n        if (startIndex + howManyElements + howManySteps > this.__length) {\n            this.__length = startIndex + howManyElements + howManySteps;\n        }\n    } else { /* to left */\n        for (var i = Math.max(0, startIndex + howManySteps); i < startIndex + howManyElements + howManySteps; i++) {\n            this.assignElement(i, this[i - howManySteps]);\n        }\n        for (var i = Math.max(0, startIndex + howManyElements + howManySteps);\n            i < startIndex + howManyElements; i++) {\n            this.assignElement(i, undefined);\n        }\n        if (startIndex + howManyElements >= this.__length) {\n            this.length = Math.max(0, startIndex + howManyElements + howManySteps);\n        }\n    }\n    this.__extendable = false;\n};\n\nOArray.prototype.unshift = function (v) {\n    this.offset(0, null, 1);\n    this.__extendable = true;\n    this.assignElement(0, v);\n    this.__extendable = false;\n    return this.__length;\n};\n\nOArray.prototype.shift = function (v) {\n    this.offset(0, null, -1);\n    return this.__length;\n};\n\nOArray.prototype.toArray = function (notClone) {\n    var r = [];\n    this.forEach(function (v, i) {\n        r.push(notClone ? v : Util.clone(v));\n    });\n    return r;\n};\n\nOArray.prototype.splice = function (startIndex, howManyToDelete, itemToInsert) {\n    if (!Util.isNumber(startIndex)) return [];\n    if (startIndex < 0 || startIndex >= this.__length) return [];\n    if (!Util.isNumber(howManyToDelete) || howManyToDelete < 0) howManyToDelete = 0;\n    if (howManyToDelete + startIndex > this.__length) howManyToDelete = this.__length - startIndex;\n\n    var r = [];\n    for (var i = startIndex; i < startIndex + howManyToDelete; i++) {\n        r.push(Util.clone(this[i]));\n    }\n\n    var itemsToInsert = Array.prototype.slice.call(arguments, 2);\n    var howManyToInsert = itemsToInsert.length;\n\n    this.__extendable = true;\n    if (howManyToDelete >= howManyToInsert) {\n        if (startIndex + howManyToDelete === this.__length) {\n            for (var i = 0; i < howManyToDelete - howManyToInsert; i++) {\n                this.pop();\n            }\n        } else {\n            this.offset(startIndex + howManyToDelete, null, howManyToInsert - howManyToDelete);\n        }\n        for (var i = startIndex; i < startIndex + howManyToInsert; i++) {\n            this.assignElement(i, itemsToInsert[i - startIndex]);\n        }\n    } else if (howManyToDelete < howManyToInsert) {\n        if (startIndex + howManyToDelete === this.__length) {\n            this.__length = startIndex + howManyToInsert;\n        } else {\n            this.offset(startIndex + howManyToDelete, null, howManyToInsert - howManyToDelete, true);\n        }\n        for (var i = startIndex; i < startIndex + howManyToInsert; i++) {\n            this.assignElement(i, itemsToInsert[i - startIndex]);\n        }\n    }\n    this.__extendable = false;\n\n    return r;\n};\n\nOArray.prototype.slice = function (startIndex, endIndex, notClone) {\n    if (!Util.isNumber(startIndex)) return [];\n    if (!Util.isNumber(endIndex)) endIndex = this.__length;\n    if (startIndex < 0 || endIndex > this.__length || startIndex >= endIndex) return [];\n    var r = [];\n    for (var i = startIndex; i < endIndex; i++) {\n        r.push(notClone ? this[i] : Util.clone(this[i]));\n    }\n    return r;\n};\n\nOArray.prototype.concat = function () {\n    return Array.prototype.concat.apply(this.toArray(), arguments);\n};\n\nOArray.prototype.reverse = function () {\n    var m = Math.floor((this.__length - 1) / 2);\n    for (var i = 0; i <= m; i++) {\n        var j = this.__length - 1 - i;\n        var vi = Util.clone(this[i]);\n        var vj = Util.clone(this[j]);\n        this[i] = vj;\n        this[j] = vi;\n    }\n};\n\nOArray.prototype.sort = function (sortBy) {};\n\nOArray.prototype.forEach = function (fn) {\n    for (var i = 0; i < this.__length; i++) {\n        var r = fn(this[i], i);\n        if (r === false) break;\n    }\n};\n\nOArray.prototype.filter = function () {\n    return Array.prototype.filter.apply(this.toArray(), arguments);\n};\n\nOArray.prototype.map = function () {\n    return Array.prototype.map.apply(this.toArray(), arguments);\n};\n\nOArray.prototype.reduce = function () {\n    return Array.prototype.reduce.apply(this.toArray(), arguments);\n};\n\nOArray.prototype.indexOf = function (v) {\n    // TODO: optimization\n    return Array.prototype.indexOf.apply(this.toArray(), arguments);\n};\n\nOArray.prototype.find = function (v) {\n    // TODO: optimization\n    return Array.prototype.find.apply(this.toArray(), arguments);\n};\n\nOArray.prototype.findIndex = function (v) {\n    // TODO: optimization\n    return Array.prototype.findIndex.apply(this.toArray(), arguments);\n};\n\nOArray.prototype.fill = function (v) {\n    this.forEach(function (e, i) {\n        this.assignElement(i, v);\n    });\n};\n\nOArray.prototype.join = function () {\n    return Array.prototype.join.apply(this.toArray(), arguments);\n};\n\nexport default OArray\n","import * as Util from './Util'\nimport OArray from './ObservableArray'\n\nvar idPropertyName = '__DMD_DARK_REF';\nvar refSpace = {};\n\n/**\n * Bind an object data into a reference space.\n * @param  {Object} data                [description]\n * @param  {Boolean} force              [description]\n * @return {[type]}                     [description]\n */\nvar BindData = function (data, force) {\n    if (!Util.isObject(data)) return refSpace;\n    if (data[idPropertyName] !== undefined && !force) return refSpace;\n\n    Object.defineProperty(data, idPropertyName, {\n        value: Util.gid()\n    });\n\n    refSpace[data[idPropertyName]] = {\n        data: data,\n        props: {}\n    };\n    var rootNode = refSpace[data[idPropertyName]];\n\n    function bindProps(node, obj) {\n        if (!Util.isObject(obj)) return;\n        if (!node.props) node.props = {};\n        Util.each(obj, function (v, p) {\n            if (!node.props[p]) {\n                node.props[p] = {\n                    setters: []\n                };\n            }\n            bindProps(node.props[p], v);\n        });\n    }\n    bindProps(rootNode, data);\n\n    function bindSetters(node, obj) {\n        Util.each(obj, function (v, p) {\n            if (delete obj[p] === false) return;\n            Object.defineProperty(obj, p, {\n                get: function () {\n                    return v;\n                },\n                set: function (_v) {\n                    function execSetters(node, newV, oldv) {\n                        Util.each(node.setters, function (setter) {\n                            setter(newV, oldv);\n                        });\n                    }\n                    execSetters(node.props[p], _v, v);\n\n                    if (Util.isBasic(_v)) {\n                        Util.clear(obj, p, _v);\n                    } else {\n                        bindProps(node.props[p], _v);\n                        bindSetters(node.props[p], _v);\n                        if (Util.isBasic(v)) {\n                            v = _v;\n                            Util.touchLeaves(v);\n                        } else {\n                            Util.extend(v, _v, true);\n                        }\n                    }\n                },\n                enumerable: true\n            });\n            bindSetters(node.props[p], v);\n        });\n    }\n    bindSetters(rootNode, data);\n\n    return refSpace;\n};\n\nexport default BindData\n"],"names":["Bind","ref","$el","relation","Util.isObject","BindData","_this","this","Util.isInstance","AliasDOM","Util.each","dom","Util.isNode","v","p","pNum","parseInt","isNaN","Util.isEventName","Util.isCSSSelector","nodeType","Node","ELEMENT_NODE","attributes","value","name","startsWith","attrPrefix","substr","length","node","TEXT_NODE","gid","n","isNumber","isNumeric","isString","isObject","Object","prototype","toString","call","isArray","isBasic","isInstance","creator","isNode","isNamedNodeMap","NamedNodeMap","isEventName","isCSSSelector","indexOf","each","func","arrayReverse","hasOwnProperty","r","i","len","ret","COMMENT_NODE","PROCESSING_INSTRUCTION_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","childNodes","Util","isFunction","forEach","clone","val","push","hasProperty","clear","withBasicVal","inRef","target","shrinkArray","arr","undefined","touchLeaves","obj","extend","dest","srcs","clean","extendObj","src","args","Array","slice","arguments","map","isKeyword","w","ifJoinAlias","join","lazyDown","lazy","Util.isString","alias","$root","fullSel","fullAlias","querySelector","$parent","sel","$targets","querySelectorAll","window","document","body","__root","defineProperty","concat","aliasProperty","get","enumerable","Alias","OArray","option","Util.isArray","afterInsertElement","beforeDeleteElement","elementEquality","v1","v2","set","__length","Util.isNumber","pop","extendable","__extendable","constructor","assignElement","_v","configurable","deleteElement","offset","startIndex","howManyElements","howManySteps","notClean","Math","max","unshift","shift","toArray","notClone","Util.clone","splice","howManyToDelete","itemToInsert","itemsToInsert","howManyToInsert","endIndex","apply","reverse","m","floor","j","vi","vj","sort","sortBy","fn","filter","reduce","find","findIndex","fill","e","refSpace","data","force","bindProps","props","setters","bindSetters","newV","oldv","setter","execSetters","Util.isBasic","Util.clear","Util.touchLeaves","Util.extend","Util.gid","rootNode","DefaultConf","refSeparator","tmplGrammer","tmplEngine","parseDeps","tmpl","classParser","styleParser","eventParser","attrValueParser","textValueParser","executor","replace","match","p1","string","DMD","defaults","bind","factory"],"mappings":"iLAiBA,SAASA,EAAKC,EAAKC,EAAKC,GACpB,GAAKC,EAAcH,GAAnB,CACAI,EAASJ,GAET,IAAIK,EAAQC,KAERC,EAAgBN,EAAKO,GACrBC,EAAUR,EAAK,SAAUS,GACrBX,EAAKC,EAAKU,KAKbC,EAAYV,KAWJ,YAFFE,EAAcD,GAAY,SAAW,WAG5CO,EAAUP,EAAU,SAAUU,EAAGC,GAC7B,OAAQA,GACJ,IAAK,OACL,IAAK,YACL,IAAK,YACL,IAAK,YACL,IAAK,QACD,MACJ,QACI,IAAIC,EAAOC,SAASF,GACfG,MAAMF,KACAG,EAAiBJ,IACjBK,EAAmBL,OAMtCZ,EAAIkB,WAAaC,KAAKC,cACtBZ,EAAUR,EAAIqB,WAAY,SAAUC,EAAOC,GACvC,GAAKA,EAAKC,WAAWpB,EAAMqB,YAE3B,OADAF,EAAOA,EAAKG,OAAOtB,EAAMqB,WAAWE,SAEhC,IAAK,OAEL,IAAK,OAEL,IAAK,OAEL,IAAK,QAEL,IAAK,QACD,MACJ,QACQX,EAAiBO,MAKjCf,EAAUR,EAAK,SAAU4B,GACrB9B,EAAKC,EAAK6B,OAEP5B,EAAIkB,SAAaC,KAAKU,aCpFzC,IAAIC,EAAM,WACN,IAAIC,EAAI,EACR,OAAO,WACH,OAAOA,KAHL,GAONC,EAAW,SAAUrB,GACrB,MAAoB,iBAANA,GAGdsB,EAAY,SAAUtB,GACtB,IAAIoB,EAAIjB,SAASH,GACjB,OAAII,MAAMgB,MACW,iBAANpB,GAA+B,iBAANA,IAAmBoB,GAAKpB,IAGhEuB,EAAW,SAAUvB,GACrB,MAAoB,iBAANA,GAOdwB,EAAW,SAAUxB,GACrB,MAA6C,oBAAtCyB,OAAOC,UAAUC,SAASC,KAAK5B,IAGtC6B,EAAU,SAAU7B,GACpB,MAA6C,mBAAtCyB,OAAOC,UAAUC,SAASC,KAAK5B,IAGtC8B,EAAU,SAAU9B,GACpB,OAAY,MAALA,GACa,kBAANA,GACM,iBAANA,GACM,iBAANA,GACM,mBAANA,GAGd+B,EAAa,SAAU/B,EAAGgC,GAC1B,MAA0B,mBAAZA,GAA0BhC,aAAagC,GAOrDC,EAAS,SAAUjC,GACnB,OAAOA,aAAaQ,MAGpB0B,EAAiB,SAAUlC,GAC3B,OAAOA,aAAamC,cAGpBC,EAAc,SAAUpC,GACxB,QAAKuB,EAASvB,IACPA,EAAEa,WAAW,OAGpBwB,EAAgB,SAAUrC,GAC1B,OAAOA,EAAEsC,QAAQ,KAAO,GAAKtC,EAAEsC,QAAQ,MAAQ,GACxCtC,EAAEsC,QAAQ,MAAQ,GAAKtC,EAAEsC,QAAQ,MAAQ,GAGhDC,EAAO,SAAUvC,EAAGwC,EAAMC,GAC1B,GAAIjB,EAASxB,IACT,IAAK,IAAIC,KAAKD,EACV,GAAKA,EAAE0C,eAAezC,KAEZ,KADN0C,EAAIH,EAAKxC,EAAEC,GAAIA,IACF,WAElB,GAAI4B,EAAQ7B,GACf,GAAKyC,EAMD,IAASG,EAAI5C,EAAEgB,OAAS,EAAG4B,GAAK,IAElB,KADND,EAAIH,EAAKxC,EAAE4C,GAAIA,IADYA,UALnC,IAAK,IAAIA,EAAI,EAAGC,EAAM7C,EAAEgB,OAAQ4B,EAAIC,IAEtB,KADNF,EAAIH,EAAKxC,EAAE4C,GAAIA,IADkBA,UAU1C,GAAIX,EAAOjC,GAAI,CAClB,IAAI8C,GAAM,EACV,OAAQ9C,EAAEO,UACN,KAAKC,KAAKC,aACN,MACJ,KAAKD,KAAKU,UACV,KAAKV,KAAKuC,aACV,KAAKvC,KAAKwC,4BACV,KAAKxC,KAAKyC,cACV,KAAKzC,KAAK0C,mBACV,KAAK1C,KAAK2C,uBACV,QACIL,GAAM,EAEd,GAAIA,EAAK,OACT,IAAK,IAAIF,EAAI,EAAGQ,EAAapD,EAAEoD,WAAYP,EAAM7C,EAAEoD,WAAWpC,OAAQ4B,EAAIC,EAAKD,IAC3EJ,EAAKY,EAAWR,IAChBL,EAAKa,EAAWR,GAAIJ,QAErB,GAAIN,EAAelC,GACtB,IAAK,IAAI4C,EAAI,EAAGC,EAAM7C,EAAEgB,OAAQ4B,EAAIC,EAAKD,IAAK,CAC1C,IAAID,EAAIH,EAAKxC,EAAE4C,GAAc,UAAG5C,EAAE4C,GAAa,UAC/C,IAAU,IAAND,EAAa,WAEdU,KAAKC,WAAWtD,EAAEuD,UACzBvD,EAAEuD,QAAQf,IAIdgB,EAAQ,SAAUC,GAClB,IAAId,EAAIc,EAYR,OAXIjC,EAASiC,IACTd,KACAJ,EAAKkB,EAAK,SAAUzD,EAAGC,GACnB0C,EAAE1C,GAAKuD,EAAMxD,MAEV6B,EAAQ4B,KACfd,KACAJ,EAAKkB,EAAK,SAAUzD,GAChB2C,EAAEe,KAAKF,EAAMxD,OAGd2C,GAGPgB,EAAc,SAAUF,EAAKxD,GAC7B,GAAIuB,EAASiC,GACT,OAAOA,EAAIf,eAAezC,GACvB,GAAI4B,EAAQ4B,GAAM,CACrB,IAAIrC,EAAIjB,SAASF,GACjB,OAAOqB,EAAUrB,IAAMwD,EAAIzC,OAASI,GAAKA,GAAK,EAElD,OAAO,GAGPwC,EAAQ,SAAUH,EAAKxD,EAAG4D,GAC1B,IAAIC,EAAQvC,EAAStB,IAAMoB,EAASpB,GAChC8D,EAASD,EAAQL,EAAIxD,GAAKwD,GAE1BjC,EAASuC,IAAWlC,EAAQkC,MAC5BxB,EAAKwB,EAAQ,SAAU/D,EAAGC,GACtB2D,EAAMG,EAAQ9D,KAEd4B,EAAQkC,IACRC,EAAYD,IAIhBD,IACAL,EAAIxD,GAAK4D,IAIbG,EAAc,SAAUC,EAAKpB,GAE7B,GADcxB,EAASwB,GAUnB,IAJAN,EAAK0B,EAAK,SAAUjE,EAAG4C,GACnB,KAAIA,GAAKC,GACJ,OAAO,EADEoB,EAAIjD,WAEnB,GACIiD,EAAIjD,OAAS6B,GAChBoB,EAAIP,KAAK,WATbnB,EAAK0B,EAAK,SAAUjE,EAAG4C,QACTsB,IAANlE,GAAiBiE,EAAIjD,WAC1B,GAUP,OAAOiD,GAGPE,EAAc,SAAUC,GACxB7B,EAAK6B,EAAK,SAAUpE,EAAGC,GACf6B,EAAQ9B,GACRoE,EAAInE,GAAKD,EAETmE,EAAYnE,MAKpBqE,EAAS,SAAUC,EAAMC,EAAMC,GAK/B,SAASC,EAAUL,EAAKM,EAAKF,GACpBhD,EAASkD,KACdnC,EAAKmC,EAAK,SAAU1E,EAAGC,IACd0D,EAAYS,EAAKnE,IAAM6B,EAAQ9B,GAC5BoE,EAAInE,KAAOD,IACXoE,EAAInE,GAAKuD,EAAMxD,IAGnByE,EAAUL,EAAInE,GAAID,EAAGwE,KAGzBA,IACAjC,EAAK6B,EAAK,SAAUpE,EAAGC,GACd0D,EAAYe,EAAKzE,IAClB2D,EAAMQ,EAAKnE,KAGf4B,EAAQuC,IACRJ,EAAYI,KAtBxB,IAAK5C,EAAS8C,GAAO,OAAO,KAC5B,IAAIK,EAAOC,MAAMlD,UAAUmD,MAAMjD,KAAKkD,UAAW,GACT,IAApCA,UAAUA,UAAU9D,OAAS,GAAe8D,UAAU9D,OAAS,EAAK8D,UAAU9D,QA4BlF,OAHAuB,EAAKoC,EAAM,SAAUD,GACjBD,EAAUH,EAAMI,EAAKF,KAElBF,GClNP1E,EAAW,SAAUmF,EAAK1F,GAI1B,SAAS2F,EAAUC,GACf,MAAa,UAANA,GAAuB,SAANA,GAAsB,SAANA,EAJ5C,IAAIC,IAAgBH,EAAII,MAOxB,SAAUC,EAASL,GACVxF,EAAcwF,KACfA,EAAIM,MACJxF,EAAUkF,EAAK,SAAU/E,EAAGC,GACpB+E,EAAU/E,KACVqF,EAActF,GACd+E,EAAI9E,IACAsF,MAAOvF,EACPqF,MAAM,GAEH9F,EAAcS,KACrBA,EAAEqF,MAAO,MAIrBxF,EAAUkF,EAAKK,IAfnB,CAgBGL,GAEH,SAAUQ,EAAMR,EAAKS,EAAOpB,EAAKqB,EAASC,GAQtC,SAASC,EAAcC,EAASC,GAC5B,IAAKA,EAAK,OAAOD,EACjB,IAAIE,EAAWlB,MAAMlD,UAAUmD,MAAMjD,KAAKgE,EAAQG,iBAAiBF,IACnE,OAAIC,EAAS9E,OAAS,EAAU,KACR,IAApB8E,EAAS9E,OAAqB8E,EAAS,GACpCA,EAGX,GAfAf,EAAMO,EAAcP,IAASQ,MAAOR,GAASxF,EAAcwF,GAAOA,KAClES,EAAQA,GAASQ,OAAOC,SAASC,OACjC9B,EAAMA,OACD+B,QAAU1E,OAAO2E,eAAehC,EAAK,UAAYzD,MAAO6E,IAC7DC,EAAUA,MACVC,EAAYA,MAURX,EAAIQ,MAAO,CACXG,EAAYA,EAAUW,OAAOtB,EAAIQ,OACjC,IAAIe,EAAgBpB,EAAcQ,EAAUP,KA1C/B,KA0CsDJ,EAAIQ,MACnER,EAAIM,KACJ5D,OAAO2E,eAAehC,EAAKkC,GACvBC,IAAK,WACD,OAAOZ,EAAcjG,KAAKyG,OAAQV,EAAQN,KAAK,OAEnDqB,YAAY,IAGhBpC,EAAIkC,GAAiBX,EAAcH,EAAOC,EAAQN,KAAK,MAS/D,OALAtF,EAAUkF,EAAK,SAAU/E,EAAG6F,GACpBb,EAAUa,IACdN,EAAMvF,EAAGwF,EAAOpB,EAAKqB,EAAQY,OAAOR,GAAMH,KAGvCtB,EApCX,CAqCGW,EAAK1F,EAAKK,OAMb+G,EAAQ,SAAU1B,EAAK1F,GACvB,OAAO,IAAIO,EAASmF,EAAK1F,IC1EzBqH,EAAS,SAAUzC,EAAK0C,GACnBC,EAAa3C,KAAMA,MACnB1E,EAAcoH,KAASA,MAE5BlF,OAAO2E,eAAe1G,KAAM,sBACxBiB,MAAOgG,EAAOE,oBAAsB,SAAU9C,EAAQ9D,OAE1DwB,OAAO2E,eAAe1G,KAAM,uBACxBiB,MAAOgG,EAAOG,qBAAuB,SAAU/C,EAAQ9D,OAE3DwB,OAAO2E,eAAe1G,KAAM,mBACxBiB,MAAOgG,EAAOI,iBAAmB,SAAUC,EAAIC,GAAM,OAAOD,IAAOC,KAGvE,IAAIpE,EAAM,EACVpB,OAAO2E,eAAe1G,KAAM,YACxB6G,IAAK,WACD,OAAO1D,GAEXqE,IAAK,SAAUlH,GACX,OAAO6C,EAAM7C,KAGrByB,OAAO2E,eAAe1G,KAAM,UACxB6G,IAAK,WACD,OAAO7G,KAAKyH,UAEhBD,IAAK,SAAUlH,GACX,IAAKoH,EAAcpH,GAAI,OAAO,EAC9B,IAAIoB,EAAIjB,SAASH,GACjB,GAAII,MAAMgB,IAAMA,EAAI,EAAG,OAAO,EAC9B,GAAIA,EAAI1B,KAAKyH,SACT,IAASvE,EAAIlD,KAAKyH,SAAUvE,EAAIxB,EAAGwB,IAC/BlD,KAAKgE,UAAKQ,QACX,GAAI9C,EAAI1B,KAAKyH,SAChB,IAAK,IAAIvE,EAAIlD,KAAKyH,SAAW,EAAGvE,GAAKxB,EAAGwB,IACpClD,KAAK2H,MAEb,OAAO3H,KAAKyH,YAIpB,IAAIG,GAAa,EACjB7F,OAAO2E,eAAe1G,KAAM,gBACxB6G,IAAK,WACD,OAAOe,GAEXJ,IAAK,SAAUlH,GACX,OAAOsH,IAAetH,KAI9B,IAAIP,EAAQC,KACZA,KAAK6H,cAAe,EACpB1H,EAAUoE,EAAK,SAAUjE,EAAG4C,GACxBnD,EAAMiE,KAAK1D,KAEfN,KAAK6H,cAAe,IAGxBb,EAAOhF,cACU8F,YAAcd,EAE/BA,EAAOhF,UAAU+F,cAAgB,SAAU7E,EAAGa,GAC1C,IAAK2D,EAAcxE,GAAI,OAAO,EAC9B,GAAIlD,KAAKgD,eAAeE,GACpBlD,KAAKkD,GAAKa,MACP,CAAA,IAAI/D,KAAK6H,aAaZ,OAAO,EAZP,IAAIvH,EAAIyD,EACRhC,OAAO2E,eAAe1G,KAAMkD,GACxB2D,IAAK,WACD,OAAOvG,GAEXkH,IAAK,SAAUQ,GACX,OAAO1H,EAAI0H,GAEfC,cAAc,EACdnB,YAAY,MAOxBE,EAAOhF,UAAUkG,cAAgB,SAAUhF,GACvC,SAAKwE,EAAcxE,KAAOlD,KAAKgD,eAAeE,aACvClD,KAAKkD,IACL,IAGX8D,EAAOhF,UAAUgC,KAAO,SAAU1D,GAK9B,OAJAN,KAAK6H,cAAe,EACpB7H,KAAK+H,cAAc/H,KAAKyH,SAAUnH,GAClCN,KAAK6H,cAAe,IACpB7H,KAAKyH,UAITT,EAAOhF,UAAU2F,IAAM,SAAUrH,GAE7B,OADIN,KAAKkI,cAAclI,KAAKyH,SAAW,KAAIzH,KAAKyH,UAAY,GACrDzH,KAAKyH,UAGhBT,EAAOhF,UAAUmG,OAAS,SAAUC,EAAYC,EAAiBC,EAAcC,GAC3E,IAAKb,EAAcU,IAAeA,EAAa,GAAKA,GAAcpI,KAAKyH,SAAU,OAAO,EACxF,IAAKC,EAAcY,IAAkC,IAAjBA,EAAoB,OAAO,EAI/D,KAHKZ,EAAcW,IAAoBA,GAAmB,GACnDA,EAAkBD,EAAapI,KAAKyH,YAAUY,EAAkBrI,KAAKyH,SAAWW,GACvFpI,KAAK6H,cAAe,EAChBS,EAAe,EAAG,CAClB,IAASpF,EAAIkF,EAAaC,EAAkB,EAAIC,EAAcpF,GAAKkF,EAAaE,EAAcpF,IAC1FlD,KAAK+H,cAAc7E,EAAGlD,KAAKkD,EAAIoF,IAEnC,IAAKC,EACD,IAASrF,EAAIkF,EAAYlF,EAAIkF,EAAaE,EAAcpF,IACpDlD,KAAK+H,cAAc7E,OAAGsB,GAG1B4D,EAAaC,EAAkBC,EAAetI,KAAKyH,WACnDzH,KAAKyH,SAAWW,EAAaC,EAAkBC,OAEhD,CACH,IAASpF,EAAIsF,KAAKC,IAAI,EAAGL,EAAaE,GAAepF,EAAIkF,EAAaC,EAAkBC,EAAcpF,IAClGlD,KAAK+H,cAAc7E,EAAGlD,KAAKkD,EAAIoF,IAEnC,IAAK,IAAIpF,EAAIsF,KAAKC,IAAI,EAAGL,EAAaC,EAAkBC,GACpDpF,EAAIkF,EAAaC,EAAiBnF,IAClClD,KAAK+H,cAAc7E,OAAGsB,GAEtB4D,EAAaC,GAAmBrI,KAAKyH,WACrCzH,KAAKsB,OAASkH,KAAKC,IAAI,EAAGL,EAAaC,EAAkBC,IAGjEtI,KAAK6H,cAAe,GAGxBb,EAAOhF,UAAU0G,QAAU,SAAUpI,GAKjC,OAJAN,KAAKmI,OAAO,EAAG,KAAM,GACrBnI,KAAK6H,cAAe,EACpB7H,KAAK+H,cAAc,EAAGzH,GACtBN,KAAK6H,cAAe,EACb7H,KAAKyH,UAGhBT,EAAOhF,UAAU2G,MAAQ,SAAUrI,GAE/B,OADAN,KAAKmI,OAAO,EAAG,MAAO,GACfnI,KAAKyH,UAGhBT,EAAOhF,UAAU4G,QAAU,SAAUC,GACjC,IAAI5F,KAIJ,OAHAjD,KAAK6D,QAAQ,SAAUvD,EAAG4C,GACtBD,EAAEe,KAAK6E,EAAWvI,EAAIwI,EAAWxI,MAE9B2C,GAGX+D,EAAOhF,UAAU+G,OAAS,SAAUX,EAAYY,EAAiBC,GAC7D,IAAKvB,EAAcU,GAAa,SAChC,GAAIA,EAAa,GAAKA,GAAcpI,KAAKyH,SAAU,WAC9CC,EAAcsB,IAAoBA,EAAkB,KAAGA,EAAkB,GAC1EA,EAAkBZ,EAAapI,KAAKyH,WAAUuB,EAAkBhJ,KAAKyH,SAAWW,GAGpF,IAAK,IADDnF,KACKC,EAAIkF,EAAYlF,EAAIkF,EAAaY,EAAiB9F,IACvDD,EAAEe,KAAK8E,EAAW9I,KAAKkD,KAG3B,IAAIgG,EAAgBhE,MAAMlD,UAAUmD,MAAMjD,KAAKkD,UAAW,GACtD+D,EAAkBD,EAAc5H,OAGpC,GADAtB,KAAK6H,cAAe,EAChBmB,GAAmBG,EAAiB,CACpC,GAAIf,EAAaY,IAAoBhJ,KAAKyH,SACtC,IAASvE,EAAI,EAAGA,EAAI8F,EAAkBG,EAAiBjG,IACnDlD,KAAK2H,WAGT3H,KAAKmI,OAAOC,EAAaY,EAAiB,KAAMG,EAAkBH,GAEtE,IAAS9F,EAAIkF,EAAYlF,EAAIkF,EAAae,EAAiBjG,IACvDlD,KAAK+H,cAAc7E,EAAGgG,EAAchG,EAAIkF,SAEzC,GAAIY,EAAkBG,EAAiB,CACtCf,EAAaY,IAAoBhJ,KAAKyH,SACtCzH,KAAKyH,SAAWW,EAAae,EAE7BnJ,KAAKmI,OAAOC,EAAaY,EAAiB,KAAMG,EAAkBH,GAAiB,GAEvF,IAAS9F,EAAIkF,EAAYlF,EAAIkF,EAAae,EAAiBjG,IACvDlD,KAAK+H,cAAc7E,EAAGgG,EAAchG,EAAIkF,IAKhD,OAFApI,KAAK6H,cAAe,EAEb5E,GAGX+D,EAAOhF,UAAUmD,MAAQ,SAAUiD,EAAYgB,EAAUP,GACrD,IAAKnB,EAAcU,GAAa,SAEhC,GADKV,EAAc0B,KAAWA,EAAWpJ,KAAKyH,UAC1CW,EAAa,GAAKgB,EAAWpJ,KAAKyH,UAAYW,GAAcgB,EAAU,SAE1E,IAAK,IADDnG,KACKC,EAAIkF,EAAYlF,EAAIkG,EAAUlG,IACnCD,EAAEe,KAAK6E,EAAW7I,KAAKkD,GAAK4F,EAAW9I,KAAKkD,KAEhD,OAAOD,GAGX+D,EAAOhF,UAAU2E,OAAS,WACtB,OAAOzB,MAAMlD,UAAU2E,OAAO0C,MAAMrJ,KAAK4I,UAAWxD,YAGxD4B,EAAOhF,UAAUsH,QAAU,WAEvB,IAAK,IADDC,EAAIf,KAAKgB,OAAOxJ,KAAKyH,SAAW,GAAK,GAChCvE,EAAI,EAAGA,GAAKqG,EAAGrG,IAAK,CACzB,IAAIuG,EAAIzJ,KAAKyH,SAAW,EAAIvE,EACxBwG,EAAKZ,EAAW9I,KAAKkD,IACrByG,EAAKb,EAAW9I,KAAKyJ,IACzBzJ,KAAKkD,GAAKyG,EACV3J,KAAKyJ,GAAKC,IAIlB1C,EAAOhF,UAAU4H,KAAO,SAAUC,KAElC7C,EAAOhF,UAAU6B,QAAU,SAAUiG,GACjC,IAAK,IAAI5G,EAAI,EAAGA,EAAIlD,KAAKyH,WAEX,IADFqC,EAAG9J,KAAKkD,GAAIA,GADWA,OAMvC8D,EAAOhF,UAAU+H,OAAS,WACtB,OAAO7E,MAAMlD,UAAU+H,OAAOV,MAAMrJ,KAAK4I,UAAWxD,YAGxD4B,EAAOhF,UAAUqD,IAAM,WACnB,OAAOH,MAAMlD,UAAUqD,IAAIgE,MAAMrJ,KAAK4I,UAAWxD,YAGrD4B,EAAOhF,UAAUgI,OAAS,WACtB,OAAO9E,MAAMlD,UAAUgI,OAAOX,MAAMrJ,KAAK4I,UAAWxD,YAGxD4B,EAAOhF,UAAUY,QAAU,SAAUtC,GAEjC,OAAO4E,MAAMlD,UAAUY,QAAQyG,MAAMrJ,KAAK4I,UAAWxD,YAGzD4B,EAAOhF,UAAUiI,KAAO,SAAU3J,GAE9B,OAAO4E,MAAMlD,UAAUiI,KAAKZ,MAAMrJ,KAAK4I,UAAWxD,YAGtD4B,EAAOhF,UAAUkI,UAAY,SAAU5J,GAEnC,OAAO4E,MAAMlD,UAAUkI,UAAUb,MAAMrJ,KAAK4I,UAAWxD,YAG3D4B,EAAOhF,UAAUmI,KAAO,SAAU7J,GAC9BN,KAAK6D,QAAQ,SAAUuG,EAAGlH,GACtBlD,KAAK+H,cAAc7E,EAAG5C,MAI9B0G,EAAOhF,UAAUyD,KAAO,WACpB,OAAOP,MAAMlD,UAAUyD,KAAK4D,MAAMrJ,KAAK4I,UAAWxD,YC5QtD,IACIiF,KAQAvK,EAAW,SAAUwK,EAAMC,GAc3B,SAASC,EAAUjJ,EAAMmD,GAChB7E,EAAc6E,KACdnD,EAAKkJ,QAAOlJ,EAAKkJ,UACtBtK,EAAUuE,EAAK,SAAUpE,EAAGC,GACnBgB,EAAKkJ,MAAMlK,KACZgB,EAAKkJ,MAAMlK,IACPmK,aAGRF,EAAUjJ,EAAKkJ,MAAMlK,GAAID,MAKjC,SAASqK,EAAYpJ,EAAMmD,GACvBvE,EAAUuE,EAAK,SAAUpE,EAAGC,IACF,UAAXmE,EAAInE,KACfwB,OAAO2E,eAAehC,EAAKnE,GACvBsG,IAAK,WACD,OAAOvG,GAEXkH,IAAK,SAAUQ,IACX,SAAqBzG,EAAMqJ,EAAMC,GAC7B1K,EAAUoB,EAAKmJ,QAAS,SAAUI,GAC9BA,EAAOF,EAAMC,KAGrBE,CAAYxJ,EAAKkJ,MAAMlK,GAAIyH,EAAI1H,GAE3B0K,EAAahD,GACbiD,EAAWvG,EAAKnE,EAAGyH,IAEnBwC,EAAUjJ,EAAKkJ,MAAMlK,GAAIyH,GACzB2C,EAAYpJ,EAAKkJ,MAAMlK,GAAIyH,GACvBgD,EAAa1K,GAEb4K,EADA5K,EAAI0H,GAGJmD,EAAY7K,EAAG0H,GAAI,KAI/BlB,YAAY,IAEhB6D,EAAYpJ,EAAKkJ,MAAMlK,GAAID,MAzDnC,IAAKT,EAAcyK,GAAO,OAAOD,EACjC,QAA6B7F,IAAzB8F,EAAmB,iBAAoBC,EAAO,OAAOF,EAEzDtI,OAAO2E,eAAe4D,EAbL,kBAcbrJ,MAAOmK,MAGXf,EAASC,EAAmB,iBACxBA,KAAMA,EACNG,UAEJ,IAAIY,EAAWhB,EAASC,EAAmB,gBAmD3C,OArCAE,EAAUa,EAAUf,GAmCpBK,EAAYU,EAAUf,GAEfD,GJmBPiB,GAxFcxL,KAyFdsB,WAAY,KACZmK,aAAc,IACdC,YAAa,cACbC,YACIC,UAAW,SAAUC,KAGrBC,YAAa,aACbC,YAAa,aACbC,YAAa,aACbC,gBAAiB,aACjBC,gBAAiB,SAAUL,EAAMM,GAC7B,OAAON,EAAKO,QAAQ,eAAgB,SAAUC,EAAOC,EAAIjE,EAAQkE,GAC7D,OAAOJ,EAASG,SAOxBE,EAAM,SAAU3M,EAAKsH,GACrBjH,KAAKL,IAAMA,GAAO2G,OAAOC,SAASC,KAElCxG,KAAKuM,YACLpB,EAAYnL,KAAKuM,SAAUjB,EAAarE,IAG5CqF,EAAItK,UAAU6D,MAAQ,SAAUR,GAC5B,OAAO0B,EAAM1B,EAAKrF,KAAKL,MAG3B2M,EAAItK,UAAUwK,KAAO,SAAU9M,EAAKE,GAChC,OAAOH,EAAKC,EAAKM,KAAKL,IAAKC,IAK/B,IAAI6M,EAAU,SAAU9M,EAAKsH,GACzB,OAAO,IAAIqF,EAAI3M,EAAKsH,WAExBwF,EAAQF,SAAWzD,EAAWwC,GAC9BmB,EAAQ5G,MAAQkB,EAChB0F,EAAQnC,KAAOxK,EACf2M,EAAQD,KAAO/M"}