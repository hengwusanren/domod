{"version":3,"file":"domod.js","sources":["../src/Util.js","../src/Kernel.js","../src/index.js"],"sourcesContent":["var gid = (function () {\n    var n = 0;\n    return function () {\n        return n++;\n    };\n})();\n\nvar isBoolean = function (v) {\n    return typeof v === 'boolean';\n};\n\nvar isNumber = function (v) {\n    return typeof v === 'number';\n};\n\nvar isNumeric = function (v) {\n    var n = parseInt(v);\n    if (isNaN(n)) return false;\n    return (typeof v === 'number' || typeof v === 'string') && n == v;\n};\n\nvar isString = function (v) {\n    return typeof v === 'string';\n};\n\nvar isFunction = function (v) {\n    return typeof v === 'function';\n};\n\nvar isObject = function (v) {\n    return v != null && Object.prototype.toString.call(v) === '[object Object]';\n};\n\nvar isArray = function (v) {\n    return Object.prototype.toString.call(v) === '[object Array]';\n};\n\nvar isBasic = function (v) {\n    return v == null\n        || typeof v === 'boolean'\n        || typeof v === 'number'\n        || typeof v === 'string'\n        || typeof v === 'function';\n};\n\nvar isInstance = function (v, creator) {\n    return typeof creator === 'function' && v instanceof creator;\n};\n\nvar isDirectInstance = function (v, creator) {\n    return v.constructor === creator;\n};\n\nvar isNode = function (v) {\n    if (typeof Node !== 'function') return false;\n    return v instanceof Node;\n};\n\nvar isNamedNodeMap = function (v) {\n    return v instanceof NamedNodeMap;\n};\n\nvar isEventName = function (v) {\n    if (!isString(v) || !v.startsWith('on')) return false;\n    return v.substr(2); // TODO\n};\n\nvar isCSSSelector = function (v) {\n    return v.indexOf(' ') > 0 || v.indexOf('.') >= 0\n        || v.indexOf('[') >= 0 || v.indexOf('#') >= 0;\n};\n\nvar each = function (v, func, arrayReverse) {\n    if (isObject(v)) {\n        for (var p in v) {\n            if (!v.hasOwnProperty(p)) continue;\n            var r = func(v[p], p);\n            if (r === false) break;\n        }\n    } else if (isArray(v)) {\n        if (!arrayReverse) {\n            for (var i = 0, len = v.length; i < len; i++) {\n                var r = func(v[i], i);\n                if (r === false) break;\n            }\n        } else {\n            for (var i = v.length - 1; i >= 0; i--) {\n                var r = func(v[i], i);\n                if (r === false) break;\n            }\n        }\n    } else if (isNode(v)) {\n        var ret = false;\n        switch (v.nodeType) {\n            case Node.ELEMENT_NODE:\n                break;\n            case Node.TEXT_NODE:\n            case Node.COMMENT_NODE:\n            case Node.PROCESSING_INSTRUCTION_NODE:\n            case Node.DOCUMENT_NODE:\n            case Node.DOCUMENT_TYPE_NODE:\n            case Node.DOCUMENT_FRAGMENT_NODE:\n            default:\n                ret = true;\n        }\n        if (ret) return;\n        for (var i = 0, childNodes = v.childNodes, len = v.childNodes.length; i < len; i++) {\n            func(childNodes[i]);\n            each(childNodes[i], func);\n        }\n    } else if (isNamedNodeMap(v)) {\n        for (var i = 0, len = v.length; i < len; i++) {\n            var r = func(v[i]['nodeValue'], v[i]['nodeName']);\n            if (r === false) break;\n        }\n    } else if (isFunction(v.forEach)) {\n        v.forEach(func);\n    }\n};\n\nvar eachIndexOf = function (str, pat) {\n    var p0 = 0, p1;\n    var len = str.length;\n    var r = [];\n    while (p0 < len) {\n        p1 = str.indexOf(pat, p0);\n        if (p1 < len) {\n            r.push(p1);\n            p0 = p1 + pat.length;\n        }\n    }\n    return r;\n};\n\nvar eachUnique = function (arr, func) {\n    if (!isArray(arr)) return;\n    var map = {};\n    for (var i = 0, len = arr.length; i < len; i++) {\n        if (!isNumber(arr[i]) || !isString(arr[i]) || map[arr[i]]) continue;\n        map[arr[i]] = true;\n        var r = func(arr[i]);\n        if (r === false) break;\n    }\n};\n\nvar unique = function (arr) {\n    var r = [];\n    eachUnique(arr, function (v) {\n        r.push(v);\n    });\n    return r;\n};\n\nvar clone = function (val) {\n    var r = val;\n    if (isObject(val)) {\n        r = {};\n        each(val, function (v, p) {\n            r[p] = clone(v);\n        });\n    } else if (isArray(val)) {\n        r = [];\n        each(val, function (v) {\n            r.push(clone(v));\n        });\n    }\n    return r;\n};\n\nvar hasProperty = function (val, p) {\n    if (isObject(val)) {\n        return val.hasOwnProperty(p);\n    } else if (isArray(val)) {\n        var n = parseInt(p);\n        return isNumeric(p) && val.length > n && n >= 0;\n    }\n    return false;\n};\n\nvar clear = function (val, p, withBasicVal) {\n    var inRef = isString(p) || isNumber(p);\n    var target = inRef ? val[p] : val;\n\n    if (isObject(target) || isArray(target)) {\n        each(target, function (v, p) {\n            clear(target, p);\n        });\n        if (isArray(target)) {\n            shrinkArray(target);\n        }\n    }\n\n    if (inRef) {\n        val[p] = withBasicVal;\n    }\n};\n\nvar shrinkArray = function (arr, len) {\n    var limited = isNumber(len);\n    if (!limited) {\n        each(arr, function (v, i) {\n            if (v === undefined) arr.length--;\n        }, true);\n    } else {\n        each(arr, function (v, i) {\n            if (i >= len) arr.length--;\n            else return false;\n        }, true);\n        while (arr.length < len) {\n            arr.push(null);\n        }\n    }\n    return arr;\n};\n\nvar touchLeaves = function (obj) {\n    each(obj, function (v, p) {\n        if (isBasic(v)) {\n            obj[p] = v;\n        } else {\n            touchLeaves(v);\n        }\n    });\n};\n\nvar extend = function (dest, srcs, clean) {\n    if (!isObject(dest)) return null;\n    var args = Array.prototype.slice.call(arguments, 1,\n        arguments[arguments.length - 1] === true ? (arguments.length - 1) : arguments.length);\n    clean = arguments[arguments.length - 1] === true ? true : false;\n\n    function extendObj(obj, src, clean) {\n        if (!isObject(src)) return;\n        each(src, function (v, p) {\n            if (!hasProperty(obj, p) || isBasic(v)) {\n                if (obj[p] !== v) {\n                    obj[p] = clone(v);\n                }\n            } else {\n                extendObj(obj[p], v, clean);\n            }\n        });\n        if (clean) {\n            each(obj, function (v, p) {\n                if (!hasProperty(src, p)) {\n                    clear(obj, p);\n                }\n            });\n            if (isArray(obj)) {\n                shrinkArray(obj);\n            }\n        }\n    }\n\n    each(args, function (src) {\n        extendObj(dest, src, clean);\n    });\n    return dest;\n};\n\nvar allRefs = function (obj) {\n    var refs = [];\n    each(obj, function (v, p) {\n        if (isObject(v)) {\n            var f = allRefs(v);\n            each(f, function (vv, pp) {\n                refs.push(p + '.' + pp);\n            });\n        } else {\n            refs.push(p);\n        }\n    })\n    return refs;\n};\n\nvar refData = function (root, refPath, value) {\n    var toSet = arguments.length >= 3;\n    var v = root;\n    var paths = [];\n    if (refPath) paths = refPath.split('.');\n\n    if (!toSet) {\n        while (paths.length) {\n            if (isBasic(v)) return undefined;\n            v = v[path.shift()];\n        }\n        return v;\n    } else {\n        while (paths.length) {\n            if (isBasic(v)) return undefined;\n            if (paths.length === 1) {\n                v[path.shift()] = value;\n            } else {\n                v = v[path.shift()];\n            }\n        }\n        return value;\n    }\n};\n\nfunction addEvent($el, eventName, handler, useCapture) {\n    if ($el.addEventListener) {\n        $el.addEventListener(eventName, handler, !!useCapture);\n    } else {\n        if (eventName === 'input') {\n            eventName = 'propertychange';\n        }\n        $el.attachEvent('on' + eventName, handler);\n    }\n}\n\nfunction flatten(root, objectFilter, clean) {\n    objectFilter = objectFilter || function () { return true; };\n    var ext = {};\n    each(root, function (v, p) {\n        if (isObject(v) && !objectFilter(v)) {\n            var f = flatten(v, objectFilter, clean);\n            each(f, function (vv, pp) {\n                ext[p + '.' + pp] = vv;\n            });\n        } else {\n            if (objectFilter(v) || !clean)\n                ext[p] = v;\n        }\n    })\n    return ext;\n}\n\nexport {\n    gid,\n    isBoolean,\n    isNumber,\n    isNumeric,\n    isString,\n    isFunction,\n    isObject,\n    isArray,\n    isBasic,\n    isInstance,\n    isDirectInstance,\n    isNode,\n    isNamedNodeMap,\n    isEventName,\n    isCSSSelector,\n    each,\n    eachIndexOf,\n    eachUnique,\n    unique,\n    clone,\n    hasProperty,\n    clear,\n    shrinkArray,\n    touchLeaves,\n    extend,\n    allRefs,\n    refData,\n    addEvent,\n    flatten\n}\n","import * as Util from './Util'\n\nvar Store = {};\nvar Dnstreams = {};\nvar ResultsIn = {};\nvar Upstreams = {};\nvar ResultsFrom = {};\nvar Laziness = {};\nvar PropKernelTable = {};\nvar KernelStatus = {};\n\nfunction get(ref, root) {\n    if (root === undefined) root = Store;\n    if ((!Util.isObject(root) && !Util.isNode(root)) || !Util.isString(ref)) return null;\n    var node = root;\n    var refs = ref.split('.');\n    while (refs.length >= 1) {\n        if (refs.length === 1) {\n            return {\n                target: node,\n                property: refs[0]\n            };\n        }\n        node = node[refs.shift()];\n        if (!Util.isObject(node) && !Util.isNode(node)) return null;\n    }\n    return null;\n}\n\nfunction set(ref, val, root) {\n    var obj = get(ref, root);\n    if (obj) obj.target[obj.property] = val;\n}\n\nfunction update(ref, root) {\n    var obj = get(ref, root);\n    if (!obj) return null;\n    var proppath = fullpathOf(ref, root);\n    if (!ResultsFrom[proppath]) return obj.target[obj.property];\n    var value = ResultsFrom[proppath].f.apply(Store, ResultsFrom[proppath].deps.map(function (p) { return update(p) }));\n    obj.target[obj.property] = value;\n    return value;\n}\n\nfunction fullpathOf(ref, root) {\n    if (root === undefined) return ref;\n    return register(root) + '.' + ref;\n}\n\nfunction register(root) {\n    if (!Util.isObject(root) && !Util.isNode(root)) return null;\n    if (!root.__kernel_root) {\n        var id = 'kr_' + Util.gid();\n        if (!Util.isNode(root)) {\n            Object.defineProperty(root, '__kernel_root', {\n                value: id\n            });\n        } else {\n            root.__kernel_root = id;\n        }\n        Store[id] = root;\n    }\n    return root.__kernel_root;\n}\n\nfunction formatStream(stream, root) {\n    if (Util.isObject(stream) || Util.isString(stream)) stream = [stream];\n    if (Util.isArray(stream)) {\n        return stream.map(function (a) {\n            if (Util.isObject(a)) return register(a.root) + '.' + a.alias;\n            if (Util.isString(a)) return register(root) + '.' + a;\n            return null;\n        });\n    } else {\n        return [];\n    }\n}\n\nfunction propKernelOrder(proppath) {\n    if (PropKernelTable[proppath] === undefined) return 0;\n    return PropKernelTable[proppath].length;\n}\n\n/**\n * Kernel constructor function.\n * @constructor\n */\nfunction Kernel(root, path, relations) {\n    var obj = get(path, root);\n    if (obj == null) return;\n    var proppath = register(root) + '.' + path;\n    var __kid = proppath + '#' + propKernelOrder(proppath);\n    Object.defineProperty(this, '__kid', {\n        value: __kid\n    });\n    KernelStatus[this.__kid] = 1;\n    var value = obj.target[obj.property];\n    if (PropKernelTable[proppath] === undefined) {\n        PropKernelTable[proppath] = [];\n        if (Util.hasProperty(obj.target, obj.property))\n            delete obj.target[obj.property];\n    }\n    PropKernelTable[proppath].push(1);\n\n    var dnstream = formatStream(relations.dnstream);\n    var resultIn = relations.resultIn;\n    var upstream = formatStream(relations.upstream);\n    var resultFrom = relations.resultFrom;\n    var lazy = !!relations.lazy;\n    if (Util.hasProperty(relations, 'value')) {\n        value = relations.value;\n    }\n    if (!Dnstreams[proppath]) Dnstreams[proppath] = {};\n    dnstream.forEach(function (p) {\n        if (!Upstreams[p]) Upstreams[p] = {};\n        if (!Upstreams[p][proppath]) Upstreams[p][proppath] = {};\n        Upstreams[p][proppath][__kid] = 1;\n        if (!Dnstreams[proppath][p]) Dnstreams[proppath][p] = {};\n        Dnstreams[proppath][p][__kid] = 1;\n    });\n    if (!ResultsIn[proppath]) ResultsIn[proppath] = [];\n    ResultsIn[proppath].push(Util.isFunction(resultIn) ? resultIn : null);\n    if (!Upstreams[proppath]) Upstreams[proppath] = {};\n    upstream.forEach(function (p) {\n        if (!Upstreams[proppath][p]) Upstreams[proppath][p] = {};\n        Upstreams[proppath][p][__kid] = 1;\n        if (!Dnstreams[p]) Dnstreams[p] = {};\n        if (!Dnstreams[p][proppath]) Dnstreams[p][proppath] = {};\n        Dnstreams[p][proppath][__kid] = 1;\n    });\n    if (Util.isFunction(resultFrom)) ResultsFrom[proppath] = {\n        f: resultFrom,\n        k: this.__kid,\n        deps: upstream\n    };\n    if (lazy) Laziness[proppath] = true;\n\n    if (PropKernelTable[proppath].length === 1) {\n        if (!Util.isNode(obj.target)) {\n            Object.defineProperty(obj.target, obj.property, {\n                get: function () {\n                    if (ResultsFrom[proppath] && KernelStatus[ResultsFrom[proppath].k] !== 0) {\n                        return update(proppath);\n                    }\n                    return value;\n                },\n                set: function (val) {\n                    if (val === value) return;\n                    value = val;\n                    ResultsIn[proppath] && ResultsIn[proppath].forEach(function (f, k) {\n                        f && (KernelStatus[proppath + '#' + k] !== 0) && f.apply(root, [val]);\n                    });\n                    if (Dnstreams[proppath]) {\n                        Util.each(Dnstreams[proppath], function (kmap, ds) {\n                            var toUpdateDnstream = false;\n                            Util.each(kmap, function (v, k) {\n                                if (KernelStatus[k] !== 0) {\n                                    toUpdateDnstream = true;\n                                    return false;\n                                }\n                            });\n                            if (toUpdateDnstream && ResultsFrom[ds] && !Laziness[ds])\n                                update(ds);\n                        });\n                    }\n                },\n                // configurable: true,\n                enumerable: true\n            });\n            obj.target[obj.property];\n        } else {\n            if (Util.isFunction(resultFrom))\n                obj.target[obj.property] = resultFrom();\n        }\n    }\n}\n\nKernel.prototype.disable = function () {\n    KernelStatus[this.__kid] = 0;\n};\nKernel.prototype.enable = function () {\n    KernelStatus[this.__kid] = 1;\n};\nKernel.prototype.destroy = function () {\n    // TODO\n};\n\n/**\n * Whether an object is a relation definition.\n * @param {Object} obj \n * @return {Boolean}\n */\nfunction isRelationDefinition(obj) {\n    if (!Util.isObject(obj)) return false;\n    var r = true;\n    var specProps = {\n        __isRelation: 2, // !\n        dnstream: 1, // *\n        resultIn: 1, // *\n        upstream: 1, // *\n        resultFrom: 1, // *\n        lazy: true,\n        value: true\n    };\n    var count = 0;\n    Util.each(obj, function (v, p) {\n        if (specProps[p] === 2) {\n            r = true;\n            count++;\n            return false;\n        }\n        if (!specProps[p]) {\n            r = false;\n            return false;\n        }\n        if (specProps[p] === 1) {\n            count++;\n        }\n    });\n    return r && (count > 0);\n}\n\n/**\n * Define and bind data with relations in a whole (PropertyPath => Relation) map.\n * @param {Object} obj                  The data object. If `relations` is undefined, it contains relations.\n * @param {Object|Undefined} relations  A map from propertyPath to relation.\n */\nfunction Relate(obj, relations) {\n    var fr;\n    if (arguments.length === 1) {\n        if (!Util.isObject(obj)) return null;\n        fr = Util.flatten(obj, isRelationDefinition, true);\n    } else if (Util.isObject(relations)) {\n        fr = Util.flatten(relations, isRelationDefinition, true);\n    } else {\n        return null;\n    }\n    Util.each(fr, function (rel, p) {\n        new Kernel(obj, p, rel);\n    });\n\n    return obj;\n}\n\nexport { Kernel, Relate }\n","// import './Polyfill'\nimport * as Util from './Util'\nimport { Kernel, Relate } from './Kernel'\n\n/**\n * Bind data to DOM.\n * @param  {HTMLElement} $el            [description]\n * @param  {Object} ref                 [description]\n * @return {[type]}                     [description]\n */\nfunction Bind($el, ref) {\n    if (!Util.isNode($el) || !Util.isObject(ref)) return;\n\n    if ($el.nodeType === Node.ELEMENT_NODE && !$el[DefaultConf.domBoundFlag]) {\n        $el[DefaultConf.domBoundFlag] = true; /* Set a binding flag. */\n        Util.each($el.attributes, function (value, name) {\n            if (!name.startsWith(DefaultConf.attrPrefix)) return;\n            name = name.substr(DefaultConf.attrPrefix.length);\n            switch (name) {\n                case 'value':\n                    Util.addEvent($el, 'input', function (e) {\n                        Util.refData(ref, value, this.value);\n                    }, false);\n                    new Kernel($el, name, relationFromExprToRef(value, ref));\n                    break;\n                case 'innerText':\n                case 'innerHTML':\n                    new Kernel($el, name, relationFromExprToRef(value, ref));\n                    break;\n                case 'class':\n                    new Kernel($el, 'className', relationFromExprToRef(value, ref, function () {\n                        var re = evaluateRawTextWithTmpl(value, ref);\n                        var classList = [];\n                        if (Util.isObject(re)) {\n                            Util.each(re, function (v, p) {\n                                v && classList.push(p);\n                            });\n                        } else if (Util.isArray(re)) {\n                            Util.each(re, function (v) {\n                                if (Util.isString(v)) classList.push(v);\n                                else if (Util.isObject(v)) {\n                                    Util.each(v, function (vv, pp) {\n                                        vv && classList.push(pp);\n                                    });\n                                }\n                            });\n                        }\n                        return classList.join(' ');\n                    }));\n                    break;\n                case 'style':\n                    new Kernel($el, 'style.cssText', relationFromExprToRef(value, ref, function () {\n                        var re = evaluateRawTextWithTmpl(value, ref);\n                        var stylePairs = [];\n                        if (Util.isObject(re)) {\n                            Util.each(re, function (v, p) {\n                                stylePairs.push(p + ':' + v);\n                            });\n                        }\n                        return stylePairs.join(';');\n                    }));\n                    break;\n                default:\n                    var eventName = Util.isEventName(name);\n                    if (eventName) { /* Event */\n                        Util.addEvent($el, eventName, function (e) {\n                            new Function(['e'].concat(Object.keys(ref)).join(','), value).apply($el, Object.values(ref));\n                        }, false);\n                    } else { /* Attribute */\n                        var resultIn = function (v) {\n                            $el.setAttribute(name, new Function(Object.keys(ref).join(','), 'return ' + value).apply($el, Object.values(ref)));\n                        };\n                        var rels = {};\n                        Util.each(parseRefsInExpr(value), function (r) {\n                            rels[r] = {\n                                resultIn: resultIn\n                            };\n                        });\n                        Relate(ref, rels);\n                    }\n            }\n        });\n        Util.each($el, function (node) {\n            Bind(node, ref);\n        });\n    } else if ($el.nodeType === Node.TEXT_NODE) {\n        var expr = parseExprsInRawText($el.nodeValue).join(';');\n        new Kernel($el, 'nodeValue', relationFromExprToRef(expr, ref, function () {\n            return evaluateRawTextWithTmpl($el.nodeValue, ref);\n        }));\n    }\n}\n\n/**\n * Evaluate an expression with a data object.\n * @param {String} expr \n * @param {Object} ref \n * @return {*}\n */\nfunction evaluateExpression(expr, ref) {\n    expr = replaceTmplInStrLiteral(expr);\n    var params = Object.keys(ref);\n    var args = Object.values(ref);\n    Util.each(args, function (v, i) {\n        if (Util.isFunction(v))\n            args[i] = v.bind(ref);\n    });\n    var result = null;\n    try {\n        result = (new Function(params.join(','), 'return ' + expr)).apply(ref, args);\n    } catch (e) {}\n    return result;\n}\n\n/**\n * Fix template strings in a string literal to JavaScript string-concat expressions.\n * @param {String} str \n * @return {String}\n * @example \"'My name is {{name}}.'\" => \"'My name is ' + (name) + '.'\"\n */\nfunction replaceTmplInStrLiteral(str) {\n    var reg = /{{([^{}]*)}}/g;\n    return str.replace(reg, function (match, p1) {\n        return '\\' + (' + p1 + ') + \\'';\n    });\n}\n\n/**\n * Evaluate a raw text with template expressions.\n * @param {String} text \n * @param {Object} ref \n * @return {String}\n * @example ('My name is {{name}}.', { name: 'Tom' }) => 'My name is Tom.'\n */\nfunction evaluateRawTextWithTmpl(text, ref) {\n    var reg = /{{([^{}]*)}}/g;\n    var result = text.replace(reg, function (match, p1) {\n        return evaluateExpression(p1, ref);\n    });\n    return result;\n}\n\n/**\n * Parse reference paths from an expression string.\n * @param {String} expr \n * @return {Array<String>}\n */\nfunction parseRefsInExpr(expr) {\n    expr = ';' + expr + ';';\n    var reg = /([a-zA-Z$_][0-9a-zA-Z$_]*)(\\.[a-zA-Z$_][0-9a-zA-Z$_]*)*/g;\n    return expr.match(reg);\n}\n\n/**\n * Parse template expression strings from a raw text such as a text node value.\n * @param {String} text     [description]\n * @return {Array<String>}  [description]\n * @example 'My name is {{name}}. I\\'m {{age}} years old.' => ['name', 'age']\n */\nfunction parseExprsInRawText(text) {\n    var reg = /{{([^{}]*)}}/g;\n    var exprs = [];\n    text.replace(reg, function (match, p1) {\n        exprs.push(p1);\n        return '';\n    });\n    return exprs;\n}\n\n/**\n * Get relations from an expression string to the data.\n * @param {String}      expr \n * @param {Object}      ref \n * @param {Function}    resultFrom \n * @return {Object}\n */\nfunction relationFromExprToRef(expr, ref, resultFrom) {\n    function getAllRefs(expr, ref) {\n        var subData = {};\n        Util.each(parseRefsInExpr(expr), function (r) {\n            subData[r] = Util.refData(ref, r);\n        });\n        return Util.allRefs(subData);\n    }\n    return {\n        upstream: getAllRefs(expr, ref).map(function (alias) {\n            return {\n                root: ref,\n                alias: alias\n            };\n        }),\n        resultFrom: resultFrom || function () {\n            return evaluateExpression(expr, ref);\n        }\n    };\n}\n\n/**\n * Unbind data from DOM.\n * @param       {[type]} $el      [description]\n * @param       {[type]} ref      [description]\n * @param       {[type]} relation [description]\n * @constructor\n */\nfunction Unbind($el, ref, relation) {\n    // TODO\n}\n\n/**\n * Default configurations.\n * @type {Object}\n */\nvar DefaultConf = {\n    attrPrefix: 'm-',\n    domBoundFlag: '__dmd_bound'\n};\n\n/**\n * Constructor.\n * @param {*}  \n * @param {*} ref \n */\nvar DMD = function ($el, ref) {\n    Bind.call(this, $el, ref);\n};\n\nexport {\n    Kernel,\n    Relate,\n    DMD\n}\n"],"names":["Util.isObject","Util.isNode","Util.isString","Util.gid","Util.isArray","Util.hasProperty","Util.isFunction","Util.each","Util.flatten","Util.addEvent","Util.refData","Util.isEventName","Util.allRefs"],"mappings":"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"}