!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.domod=e()}(this,function(){"use strict";function e(t,n,r){function i(t,e){var n=[],r=function(t){return t};if(o(e))n.push(e),r=function(){return T(t,e)};else if(u(e))if(s(e[e.length-1]))r=e[e.length-1],n=u(e[0])?e[0].slice(0):e.filter(function(t){return o(t)});else{var a=[];_(e,function(e){o(e)?a.push(e):f(e)&&_(e,function(e,r){var o=i(t,e);n=n.concat(o.deps);var s={};s[r]=o.calc,a.push(s)})}),r=function(){var e=[];return _(a,function(n){o(n)?e.push(n):f(n)&&_(n,function(n,r){return n.call(t)&&e.push(r),!1})}),e.join("\n")}}return{deps:n,calc:r}}function a(t,e,n){var r=i(t,e),o=g(r.deps).map(function(e){return w(t,e)}),s=r.calc;if(!n)return function(e){e(s.call(t)),_(o,function(n){n.setters.push(function(n){e(s.call(t,n))})})}}if(f(t)){P(t);var h=this;l(n,A)?_(n,function(n,i){e(t,n,r[i])}):c(n)&&("active"===(f(r)?"active":"passive")?_(r,function(r,i){switch(i){case"model":a(t,r,!0)(function(){});break;case"show":a(t,r)(function(t){n.style.display=t?"block":"none"});break;case"style":a(t,r)(function(t){n.cssText=t});break;case"innerText":case"innerHTML":case"className":a(t,r)(function(t){n[i]=t});break;default:var o=parseInt(i);if(isNaN(o))if(p(i))n.addEventListener(i,r,!1);else if(y(i)){var s=Array.prototype.slice.call(n.querySelectorAll(i),0);_(s,function(n){e(t,n,r)})}else a(t,r)(function(t){n.setAttribute(i,t)});else;}}):n.nodeType===Node.ELEMENT_NODE?(_(n.attributes,function(t,e){if(e.startsWith(h.attrPrefix))switch(e=e.substr(h.attrPrefix.length)){case"model":case"show":case"text":case"html":case"class":case"style":break;default:p(e)}}),_(n,function(n){e(t,n)})):(n.nodeType,Node.TEXT_NODE))}}Array.prototype.map||(Array.prototype.map=function(t){var e,n,r;if(null==this)throw new TypeError("this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(arguments.length>1&&(e=arguments[1]),n=new Array(o),r=0;r<o;){var s,f;r in i&&(s=i[r],f=t.call(e,s,r,i),n[r]=f),r++}return n}),Array.prototype.filter||(Array.prototype.filter=function(e,n){if("Function"!=typeof e||!this)throw new TypeError;var r=this.length>>>0,i=new Array(r),o=0,s=-1;if(void 0===n)for(;++s!==r;)if(s in this)if(e(t[s],s,t))i[o++]=t[s];else for(;++s!==r;)s in this&&e.call(n,t[s],s,t)&&(i[o++]=t[s]);return i.length=o,i});var n=function(){var t=0;return function(){return t++}}(),r=function(t){return"number"==typeof t},i=function(t){var e=parseInt(t);return!isNaN(e)&&(("number"==typeof t||"string"==typeof t)&&e==t)},o=function(t){return"string"==typeof t},s=function(t){return"function"==typeof t},f=function(t){return"[object Object]"===Object.prototype.toString.call(t)},u=function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=function(t){return null==t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"function"==typeof t},l=function(t,e){return"function"==typeof e&&t instanceof e},c=function(t){return t instanceof Node},h=function(t){return t instanceof NamedNodeMap},p=function(t){return!!o(t)&&t.startsWith("on")},y=function(t){return t.indexOf(" ")>0||t.indexOf(".")>=0||t.indexOf("[")>=0||t.indexOf("#")>=0},_=function(t,e,n){if(f(t)){for(var r in t)if(t.hasOwnProperty(r)&&!1===(l=e(t[r],r)))break}else if(u(t))if(n)for(i=t.length-1;i>=0&&!1!==(l=e(t[i],i));i--);else for(var i=0,o=t.length;i<o&&!1!==(l=e(t[i],i));i++);else if(c(t)){var s=!1;switch(t.nodeType){case Node.ELEMENT_NODE:break;case Node.TEXT_NODE:case Node.COMMENT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.DOCUMENT_NODE:case Node.DOCUMENT_TYPE_NODE:case Node.DOCUMENT_FRAGMENT_NODE:default:s=!0}if(s)return;for(var i=0,a=t.childNodes,o=t.childNodes.length;i<o;i++)e(a[i]),_(a[i],e)}else if(h(t))for(var i=0,o=t.length;i<o;i++){var l=e(t[i].nodeValue,t[i].nodeName);if(!1===l)break}else Util.isFunction(t.forEach)&&t.forEach(e)},d=function(t,e){if(u(t))for(var n={},i=0,s=t.length;i<s&&(!r(t[i])||!o(t[i])||n[t[i]]||(n[t[i]]=!0,!1!==e(t[i])));i++);},g=function(t){var e=[];return d(t,function(t){e.push(t)}),e},v=function(t){var e=t;return f(t)?(e={},_(t,function(t,n){e[n]=v(t)})):u(t)&&(e=[],_(t,function(t){e.push(v(t))})),e},E=function(t,e){if(f(t))return t.hasOwnProperty(e);if(u(t)){var n=parseInt(e);return i(e)&&t.length>n&&n>=0}return!1},b=function(t,e,n){var i=o(e)||r(e),s=i?t[e]:t;(f(s)||u(s))&&(_(s,function(t,e){b(s,e)}),u(s)&&m(s)),i&&(t[e]=n)},m=function(t,e){if(r(e))for(_(t,function(n,r){if(!(r>=e))return!1;t.length--},!0);t.length<e;)t.push(null);else _(t,function(e,n){void 0===e&&t.length--},!0);return t},N=function(t){_(t,function(e,n){a(e)?t[n]=e:N(e)})},O=function(t,e,n){function r(t,e,n){f(e)&&(_(e,function(e,i){!E(t,i)||a(e)?t[i]!==e&&(t[i]=v(e)):r(t[i],e,n)}),n&&(_(t,function(n,r){E(e,r)||b(t,r)}),u(t)&&m(t)))}if(!f(t))return null;var i=Array.prototype.slice.call(arguments,1,!0===arguments[arguments.length-1]?arguments.length-1:arguments.length);return _(i,function(e){r(t,e,n)}),t},A=function(t,e){function n(t){return"alias"===t||"lazy"===t||"join"===t}var r=!!t.join;!function t(e){f(e)&&(e.lazy&&_(e,function(t,r){n(r)||(o(t)?e[r]={alias:t,lazy:!0}:f(t)&&(t.lazy=!0))}),_(e,t))}(t),function t(e,i,s,u,a){function l(t,e){if(!e)return t;var n=Array.prototype.slice.call(t.querySelectorAll(e));return n.length<1?null:1===n.length?n[0]:n}if(e=o(e)?{alias:e}:f(e)?e:{},i=i||window.document.body,!(s=s||{}).__root&&Object.defineProperty(s,"__root",{value:i}),u=u||[],a=a||[],e.alias){a=a.concat(e.alias);var c=r?a.join("/"):e.alias;e.lazy?Object.defineProperty(s,c,{get:function(){return l(this.__root,u.join(" "))},enumerable:!0}):s[c]=l(i,u.join(" "))}return _(e,function(e,r){n(r)||t(e,i,s,u.concat(r),a)}),s}(t,e,this)},D=function(t,e){return new A(t,e)},x=function(t,e){u(t)||(t=[]),f(e)||(e={}),Object.defineProperty(this,"afterInsertElement",{value:e.afterInsertElement||function(t,e){}}),Object.defineProperty(this,"beforeDeleteElement",{value:e.beforeDeleteElement||function(t,e){}}),Object.defineProperty(this,"elementEquality",{value:e.elementEquality||function(t,e){return t===e}});var n=0;Object.defineProperty(this,"__length",{get:function(){return n},set:function(t){return n=t}}),Object.defineProperty(this,"length",{get:function(){return this.__length},set:function(t){if(!r(t))return!1;var e=parseInt(t);if(isNaN(e)||e<0)return!1;if(e>this.__length)for(n=this.__length;n<e;n++)this.push(void 0);else if(e<this.__length)for(var n=this.__length-1;n>=e;n--)this.pop();return this.__length}});var i=!1;Object.defineProperty(this,"__extendable",{get:function(){return i},set:function(t){return i=!!t}});var o=this;this.__extendable=!0,_(t,function(t,e){o.push(t)}),this.__extendable=!1};(x.prototype=[]).constructor=x,x.prototype.assignElement=function(t,e){if(!r(t))return!1;if(this.hasOwnProperty(t))this[t]=e;else{if(!this.__extendable)return!1;var n=e;Object.defineProperty(this,t,{get:function(){return n},set:function(t){return n=t},configurable:!0,enumerable:!0})}},x.prototype.deleteElement=function(t){return!(!r(t)||!this.hasOwnProperty(t))&&(delete this[t],!0)},x.prototype.push=function(t){return this.__extendable=!0,this.assignElement(this.__length,t),this.__extendable=!1,++this.__length},x.prototype.pop=function(t){var e=this.__length>0?this[this.__length-1]:void 0;return this.deleteElement(this.__length-1)&&(this.__length-=1),e},x.prototype.offset=function(t,e,n,i){if(!r(t)||t<0||t>=this.__length)return!1;if(!r(n)||0===n)return!1;if((!r(e)||e<=0||e+t>this.__length)&&(e=this.__length-t),this.__extendable=!0,n>0){for(o=t+e-1+n;o>=t+n;o--)this.assignElement(o,this[o-n]);if(!i)for(o=t;o<t+n;o++)this.assignElement(o,void 0);t+e+n>this.__length&&(this.__length=t+e+n)}else{for(o=Math.max(0,t+n);o<t+e+n;o++)this.assignElement(o,this[o-n]);for(var o=Math.max(0,t+e+n);o<t+e;o++)this.assignElement(o,void 0);t+e>=this.__length&&(this.length=Math.max(0,t+e+n))}this.__extendable=!1},x.prototype.unshift=function(t){return this.offset(0,null,1),this.__extendable=!0,this.assignElement(0,t),this.__extendable=!1,this.__length},x.prototype.shift=function(t){var e=this.__length>0?this[0]:void 0;return this.offset(0,null,-1),e},x.prototype.toArray=function(t){var e=[];return this.forEach(function(n,r){e.push(t?n:v(n))}),e},x.prototype.splice=function(t,e,n){if(!r(t))return[];if(t<0||t>=this.__length)return[];(!r(e)||e<0)&&(e=0),e+t>this.__length&&(e=this.__length-t);for(var i=[],o=t;o<t+e;o++)i.push(v(this[o]));var s=Array.prototype.slice.call(arguments,2),f=s.length;if(this.__extendable=!0,e>=f){if(t+e===this.__length)for(o=0;o<e-f;o++)this.pop();else this.offset(t+e,null,f-e);for(o=t;o<t+f;o++)this.assignElement(o,s[o-t])}else if(e<f){t+e===this.__length?this.__length=t+f:this.offset(t+e,null,f-e,!0);for(o=t;o<t+f;o++)this.assignElement(o,s[o-t])}return this.__extendable=!1,i},x.prototype.slice=function(t,e,n){if(!r(t))return[];if(r(e)||(e=this.__length),t<0||e>this.__length||t>=e)return[];for(var i=[],o=t;o<e;o++)i.push(n?this[o]:v(this[o]));return i},x.prototype.concat=function(){return Array.prototype.concat.apply(this.toArray(),arguments)},x.prototype.reverse=function(){for(var t=Math.floor((this.__length-1)/2),e=0;e<=t;e++){var n=this.__length-1-e,r=v(this[e]),i=v(this[n]);this[e]=i,this[n]=r}},x.prototype.sort=function(t){},x.prototype.forEach=function(t){for(var e=0;e<this.__length&&!1!==t(this[e],e);e++);},x.prototype.filter=function(){return Array.prototype.filter.apply(this.toArray(),arguments)},x.prototype.map=function(){return Array.prototype.map.apply(this.toArray(),arguments)},x.prototype.reduce=function(){return Array.prototype.reduce.apply(this.toArray(),arguments)},x.prototype.indexOf=function(t){return Array.prototype.indexOf.apply(this.toArray(),arguments)},x.prototype.find=function(t){return Array.prototype.find.apply(this.toArray(),arguments)},x.prototype.findIndex=function(t){return Array.prototype.findIndex.apply(this.toArray(),arguments)},x.prototype.fill=function(t){this.forEach(function(e,n){this.assignElement(n,t)})},x.prototype.join=function(){return Array.prototype.join.apply(this.toArray(),arguments)};var j={},P=function(t,e){function r(t,e){f(e)&&(t.props||(t.props={}),_(e,function(e,n){t.props[n]||(t.props[n]={setters:[]}),r(t.props[n],e)}))}function i(t,e){_(e,function(n,o){!1!=delete e[o]&&(Object.defineProperty(e,o,{get:function(){return n},set:function(s){!function(t,e,n){_(t.setters,function(t){t(e,n)})}(t.props[o],s,n),a(s)?b(e,o,s):(r(t.props[o],s),i(t.props[o],s),a(n)?N(n=s):O(n,s,!0))},enumerable:!0}),i(t.props[o],n))})}if(!f(t))return j;if(void 0!==t.__DMD_DARK_REF&&!e)return j;Object.defineProperty(t,"__DMD_DARK_REF",{value:n()}),j[t.__DMD_DARK_REF]={data:t,props:{}};var o=j[t.__DMD_DARK_REF];return r(o,t),i(o,t),j},w=function(t,e){t.__DMD_DARK_REF||P(t);var n=j[t.__DMD_DARK_REF],r=[];for(e&&(r=e.split("."));r.length;)n=n.props[path.shift()];return n},T=function(t,e){var n=t,r=[];for(e&&(r=e.split("."));r.length;)n=n[path.shift()];return n},M=(P(),{attrPrefix:"m-",refSeparator:"/",tmplGrammer:"dollarbrace",tmplEngine:{parseDeps:function(t){},classParser:function(){},styleParser:function(){},eventParser:function(){},attrValueParser:function(){},textValueParser:function(t,e){return t.replace(/{([^{}]*)}/gi,function(t,n,r,i){return e(n)})}}}),R=function(t,e){this.$el=t||window.document.body,this.defaults={},O(this.defaults,M,e)};R.prototype.alias=function(t){return D(t,this.$el)},R.prototype.bind=function(t,n){return e(t,this.$el,n)};var I=function(t,e){return new R(t,e)};return I.defaults=v(M),I.alias=D,I.data=P,I.bind=e,I});
//# sourceMappingURL=domod.js.map
